webpackJsonprmsh([36],{ZrnB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={components:{subordinateSort:a("3bMD").default},data:function(){return{form:{},inforKeyRadio:"1",inforKey:[{id:"1",name:"法人机构"},{id:"2",name:"内设机构"},{id:"3",name:"机构分组"}],isNoEdit:!0,subordinateSortVisible:!1,orgData:{id:"",name:""},addSubordinate:!1}},methods:{init:function(t){var e=this;this.orgData.id=t.id,this.orgData.name=t.name,this.isNoEdit=!0,this.addSubordinate=!1,this.$http({url:this.$http.adornUrl(this.API.getOrgDetailsB01),method:"post",data:this.$http.adornData({b0100:t.id})}).then(function(t){var a=t.data;a&&0===a.code?(e.form=a.data,e.inforKeyRadio=e.form.b0194):(e.form={},e.inforKeyRadio="1",e.$message.error(a.msg))})},addSubordinateHandle:function(){this.addSubordinate=!0,this.form={},this.inforKeyRadio="1",this.isNoEdit=!1},saveHandle:function(){var t=this;this.form.b0100=this.addSubordinate?null:this.orgData.id,this.form.b0100p=this.addSubordinate?this.orgData.id:this.form.b0100p,this.form.b0194=this.inforKeyRadio,this.$http({url:this.$http.adornUrl(this.API[this.addSubordinate?"saveOrgB01":"updateOrgB01"]),method:"post",data:this.$http.adornData(this.form)}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.addSubordinate&&t.$emit("refreshDataList")}}):t.$message.error(a.msg)})},deleteHandle:function(){var t=this;this.$confirm("确定删除机构,是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl(t.API.deleteOrgB01),method:"post",data:t.$http.adornData({b0100:t.orgData.id})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.$emit("refreshDataList")}}):t.$message.error(a.msg)})}).catch(function(){})},subordinateSortHandle:function(){var t=this;this.subordinateSortVisible=!0,this.$nextTick(function(){t.$refs.subordinateSort.init(t.orgData.id)})},refreshDataList:function(){this.$emit("refreshDataList")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organization-information"},[t.orgData.id?a("div",{staticClass:"organization-information-title"},[a("span"),t._v(" "),a("p",[t._v(t._s(t.orgData.name))])]):t._e(),t._v(" "),t.orgData.id?a("el-form",{staticClass:"float-right",attrs:{inline:!0}},[t.isNoEdit?a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.isNoEdit=!1}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.deleteHandle}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addSubordinateHandle}},[t._v("添加下级机构")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.subordinateSortHandle}},[t._v("下级机构排序")])],1):a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveHandle}},[t._v("保存")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"clearfix"}),t._v(" "),a("el-form",{staticClass:"organization-information-form",attrs:{"label-width":"200px","label-position":"left",disabled:t.isNoEdit}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构标识",prop:"b0194"}},[a("el-radio-group",{model:{value:t.inforKeyRadio,callback:function(e){t.inforKeyRadio=e},expression:"inforKeyRadio"}},t._l(t.inforKey,function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构全称",prop:"b0101"}},[a("el-input",{model:{value:t.form.b0101,callback:function(e){t.$set(t.form,"b0101",e)},expression:"form.b0101"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构简称",prop:"b0104"}},[a("el-input",{model:{value:t.form.b0104,callback:function(e){t.$set(t.form,"b0104",e)},expression:"form.b0104"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构编码",prop:"b0111"}},[a("el-input",{model:{value:t.form.b0111,callback:function(e){t.$set(t.form,"b0111",e)},expression:"form.b0111"}})],1)],1)],1),t._v(" "),1==t.inforKeyRadio?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所在政区",prop:"b0117"}},[a("el-input",{model:{value:t.form.b0117,callback:function(e){t.$set(t.form,"b0117",e)},expression:"form.b0117"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"隶属关系",prop:"b0124"}},[a("el-input",{model:{value:t.form.b0124,callback:function(e){t.$set(t.form,"b0124",e)},expression:"form.b0124"}})],1)],1)],1):t._e(),t._v(" "),a("el-row",[1==t.inforKeyRadio?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构类别",prop:"b0131"}},[a("el-input",{model:{value:t.form.b0131,callback:function(e){t.$set(t.form,"b0131",e)},expression:"form.b0131"}})],1)],1):t._e(),t._v(" "),3!=t.inforKeyRadio?a("el-col",{attrs:{span:1==t.inforKeyRadio?12:24}},[a("el-form-item",{attrs:{label:"机构级别",prop:"b0127"}},[a("el-input",{model:{value:t.form.b0127,callback:function(e){t.$set(t.form,"b0127",e)},expression:"form.b0127"}})],1)],1):t._e()],1),t._v(" "),1==t.inforKeyRadio?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构成立批准日期",prop:"b0164"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd"},model:{value:t.form.b0164,callback:function(e){t.$set(t.form,"b0164",e)},expression:"form.b0164"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构成立批准文号",prop:"b0167"}},[a("el-input",{model:{value:t.form.b0167,callback:function(e){t.$set(t.form,"b0167",e)},expression:"form.b0167"}})],1)],1)],1):t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"b0197"}},[a("el-input",{model:{value:t.form.b0197,callback:function(e){t.$set(t.form,"b0197",e)},expression:"form.b0197"}})],1)],1)],1)],1),t._v(" "),t.subordinateSortVisible?a("subordinate-sort",{ref:"subordinateSort",on:{refreshDataList:t.refreshDataList}}):t._e()],1)},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(t){a("i34x")},"data-v-bbe88940",null);e.default=i.exports},i34x:function(t,e){}});
//# sourceMappingURL=36.2425d3bad72ed2c1c72e.js.map