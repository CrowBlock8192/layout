webpackJsonprmsh([5,33,56,62],{"1yNw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("IcnI"),s=a("HWtk"),i=a("J8fC"),n=a("rIMY"),l={name:"area-administrator-index",props:["siteContentViewHeight"],components:{addareadialog:s.default,sortareadialog:i.default,allotareadialog:n.default},data:function(){return{dataList:[],checkedData:{},currentRow:"",addAreaVisiable:!1,sortAreaVisiable:!1,allotAreaVisiable:!1,isEdit:""}},created:function(){this.getDataList();var e=JSON.parse(sessionStorage.getItem("navSystem")||"[]");this.$store.commit("common/updateAreaSysId",e[0].sysId)},methods:{getDataList:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.getAreaTreeArea),method:"post",data:this.$http.adornData({})}).then(function(t){var a=t.data;0===a.code?e.dataList=a.data:e.$message.error(a.msg)})},addArea:function(){this.title="区域登记",this.isEdit=!0,this.addAreaVisiable=!0},editArea:function(e,t){this.checkedData=t,this.title="编辑",this.isEdit=!1,this.addAreaVisiable=!0},allotArea:function(e,t){this.checkedData=t,this.title="菜单分配",this.allotAreaVisiable=!0},deleArea:function(e,t){var a=this;this.$confirm("确定删除选中记录?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deleteArea),method:"post",data:a.$http.adornData({areaId:t.areaId})}).then(function(e){var t=e.data;0===t.code?(a.getDataList(),a.$message.success("删除成功")):a.$message.error(t.msg)})}).catch(function(){})},initializeAres:function(){var e=this;null!==this.currentRow&&""!==this.currentRow?this.$confirm("区域初始化后无法删除,是否继续初始化?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.$message({message:"正在初始化 , 请稍后......",duration:0});e.$http({url:e.$http.adornUrl(e.API.createRelationArea),method:"post",data:e.$http.adornData({areaId:e.currentRow.areaId,areaCode:e.currentRow.areaCode,areaName:e.currentRow.areaName})}).then(function(a){var r=a.data;0===r.code?(e.getDataList(),t.close(),e.$message.success("初始化成功")):(t.close(),e.$message.error(r.msg))}).catch(function(e){t.close()})}).catch(function(){e.$message({type:"info",message:"已取消区域初始化"})}):this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},changeStatusManagementArch:function(e){null!==this.currentRow&&""!==this.currentRow||this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},addback:function(e){this.addAreaVisiable=!1,this.allotAreaVisiable=!1,e&&(this.getDataList(),r.a.dispatch("common/getNewMenuList"))},sortArea:function(){this.sortAreaVisiable=!0},currentChange:function(e){this.currentRow=e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticClass:"area-administrator-container",staticStyle:{width:"100%"}},[a("div",{staticClass:"table-header-btn"},[a("div",{staticClass:"table-header-btn-l"}),e._v(" "),a("div",{staticClass:"table-header-btn-r"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.initializeAres()}}},[e._v("区域初始化")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addArea}},[e._v("区域登记")])],1)]),e._v(" "),a("el-table",{ref:"areaListForm",attrs:{data:e.dataList,"row-key":"areaId",height:e.siteContentViewHeight-56+"px","highlight-current-row":""},on:{"current-change":e.currentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"区域代码",prop:"areaCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"区域名称",prop:"areaName"}}),e._v(" "),a("el-table-column",{attrs:{label:"区域级别",prop:"areaLevel"}}),e._v(" "),a("el-table-column",{attrs:{label:"区域状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.areaStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("停用")]):-1==t.row.areaStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("未初始化")]):a("el-tag",{attrs:{size:"small"}},[e._v("启用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"区域类型",prop:"areaType"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.editArea(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return e.deleArea(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.allotArea(t.$index,t.row)}}},[e._v("菜单分配")])]}}])})],1)],1),e._v(" "),e.addAreaVisiable?a("el-dialog",{attrs:{title:e.title,width:"60%",visible:e.addAreaVisiable,"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(t){e.addAreaVisiable=t}}},[a("addareadialog",{attrs:{checkedData:e.checkedData,isEdit:e.isEdit},on:{addback:e.addback}})],1):e._e(),e._v(" "),e.allotAreaVisiable?a("el-dialog",{attrs:{title:e.title,width:"50%",visible:e.allotAreaVisiable,"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(t){e.allotAreaVisiable=t}}},[a("allotareadialog",{attrs:{checkedData:e.checkedData},on:{addback:e.addback}})],1):e._e(),e._v(" "),e.sortAreaVisiable?a("el-dialog",{attrs:{title:"排序",width:"50%",visible:e.sortAreaVisiable,"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(t){e.sortAreaVisiable=t}}},[a("sortareadialog")],1):e._e()],1)},staticRenderFns:[]};var d=a("C7Lr")(l,o,!1,function(e){a("W6Cr")},"data-v-45cb3ead",null);t.default=d.exports},"5ewd":function(e,t){},HWtk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"add-area-dialog",components:{AreaTreeSelect:a("m2Og").default},props:["checkedData","isEdit"],data:function(){return{rules:{areaCode:[{required:!0,message:"请输入区域代码",trigger:"change"}],areaName:[{required:!0,message:"请输入区域名称",trigger:"change"}],areaType:[{required:!0,message:"请输入区域类型",trigger:"change"}]},dataForm:{areaId:"",areaCode:"",areaName:"",areaType:"",areaStatus:0,areaPid:"",areaLevel:""}}},created:function(){this.setFormData()},methods:{setFormData:function(){!1===this.isEdit&&(this.dataForm.areaId=this.checkedData.areaId,this.dataForm.areaCode=this.checkedData.areaCode,this.dataForm.areaName=this.checkedData.areaName,this.dataForm.areaStatus=Number(this.checkedData.areaStatus),this.dataForm.areaType=this.checkedData.areaType,this.dataForm.areaPid=this.checkedData.areaPid,this.dataForm.areaLevel=this.checkedData.areaLevel)},saveArea:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.$http({url:e.$http.adornUrl(e.API.savaOrUpdateArea),method:"post",data:e.$http.adornData(e.dataForm)}).then(function(t){var a=t.data;0==a.code?(e.$message({message:"成功",type:"success"}),e.$emit("addback",!0)):e.$message.error(a.msg)})})},treeSelectCall:function(e){e&&e.areaId&&(this.dataForm.areaPid=e.areaId,this.dataForm.areaLevel=parseInt(e.areaLevel)+1)},cancle:function(){this.$emit("addback",!1)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"addForm",attrs:{rules:e.rules,model:e.dataForm,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域代码",prop:"areaCode"}},[a("el-input",{attrs:{type:"text",maxlength:"15",placeholder:"请输入区域代码"},model:{value:e.dataForm.areaCode,callback:function(t){e.$set(e.dataForm,"areaCode",t)},expression:"dataForm.areaCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域名称",prop:"areaName"}},[a("el-input",{attrs:{type:"text",maxlength:"10",placeholder:"请输入区域名称"},model:{value:e.dataForm.areaName,callback:function(t){e.$set(e.dataForm,"areaName",t)},expression:"dataForm.areaName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域类型",prop:"areaType"}},[a("el-input",{attrs:{type:"text",maxlength:"10",placeholder:"请输入区域类型"},model:{value:e.dataForm.areaType,callback:function(t){e.$set(e.dataForm,"areaType",t)},expression:"dataForm.areaType"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域状态",prop:"areaStatus"}},[a("el-radio-group",{model:{value:e.dataForm.areaStatus,callback:function(t){e.$set(e.dataForm,"areaStatus",t)},expression:"dataForm.areaStatus"}},[a("el-radio",{attrs:{label:0}},[e._v("停用")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("启用")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"areaPid"}},[a("AreaTreeSelect",{attrs:{defaultOptions:e.dataForm.areaPid},on:{TreeSelectCall:e.treeSelectCall}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveArea()}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancle()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(r,s,!1,function(e){a("Y6fY")},null,null);t.default=i.exports},J8fC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sortareadialog-container"},[a("el-button",{attrs:{type:"primary"}},[e._v("初始化排序")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("下移")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("保存")]),e._v(" "),a("el-table",{ref:"sortTable"},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"编码"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称"}})],1)],1)},staticRenderFns:[]};var s=a("C7Lr")({name:"sort-area-dialog",data:function(){return{}},methods:{}},r,!1,function(e){a("5ewd")},null,null);t.default=s.exports},W6Cr:function(e,t){},Y6fY:function(e,t){},r7Wu:function(e,t){},rIMY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"allot-area-dialog",props:["checkedData"],components:{orgTree:a("HMPb").a},computed:{filtersDataList:function(){return this.dataList.filter(function(e){return"1"===e.sysStsatus})}},data:function(){return{roleId:"",checkedAll:!1,checkStrictly:!1,treeData:[],treeCheckBox:!0,defaultChecked:[],dataList:[],sysId:"",activeName:this.$store.state.common.areaSysId,treeIds:[],treeLoading:!0}},watch:{},created:function(){this.sysDataList();var e=this.$store.state.common.areaSysId;this.getData(e)},methods:{handleCheck:function(e){this.checkedAll=e,e?this.$refs.tree.setCheckedNodes(this.treeData):this.$refs.tree.setCheckedNodes([])},check:function(e,t){this.restAllChecked(),-1!==t.checkedKeys.indexOf(e.id)?(this.selectedParent(e),this.uniteChildSame(e,!0)):0!==e.children.length&&this.uniteChildSame(e,!1)},sysDataList:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.getAllApplySystemInfoSystem),method:"post",data:this.$http.adornData({searchCount:!1})}).then(function(t){var a=t.data;0===a.code?e.dataList=a.data:(e.$message.error(a.msg),e.dataList=[])})},handleClick:function(e){this.sysId=e.name,this.getData(this.sysId)},getData:function(e){var t=this;this.treeIds=[],this.$http({url:this.$http.adornUrl(this.API.getMenuTreetBysIdMenu),method:"post",data:this.$http.adornData({sysId:e,areaId:this.checkedData.areaId})}).then(function(e){var a=e.data;a&&0===a.code?(t.treeData=a.data,t.defaultChecked=t.getIsCheckCurrent(a.data),t.treeLoading=!1):(t.$message.error(a.msg),t.treeData=[],t.defaultChecked=[],t.treeLoading=!1)})},getCurrentKey:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.batchInsertSysAreaMenuArea),method:"post",data:this.$http.adornData({areaId:this.checkedData.areaId,sysId:this.sysId||this.$store.state.common.areaSysId,menuId:this.$refs.tree.getCheckedKeys().join(",")})}).then(function(t){var a=t.data;a&&0===a.code?(e.$message.success("操作成功"),e.$emit("addback",!0)):e.$message.error(a.msg)})},getIsCheckCurrent:function(e){var t=this,a=[];if(e){return function e(r){return r.forEach(function(r){t.treeIds.push(r.id),r.isCheck&&a.push(r.id),r.children&&r.children.length>0&&e(r.children)}),t.checkedAll=a.length===t.treeIds.length&&t.treeIds.length>0,a}(e)}},uniteChildSame:function(e,t){var a=this;this.$refs.tree.setChecked(e.id,t),e.children.forEach(function(r,s){a.uniteChildSame(e.children[s],t)})},selectedParent:function(e){var t=this.$refs.tree.getNode(e);console.log(t),void 0!==t.parent.key&&(this.$refs.tree.setChecked(t.parent,!0),this.selectedParent(t.parent))},restAllChecked:function(){var e=this.$refs.tree.getCheckedKeys().length;console.log(e),this.checkedAll=e===this.treeIds.length}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.filtersDataList,function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.sysName,name:e.sysId}})}),1),e._v(" "),a("div",{staticClass:"float-right"},[a("el-checkbox",{on:{change:e.handleCheck},model:{value:e.checkedAll,callback:function(t){e.checkedAll=t},expression:"checkedAll"}},[e._v("关联子节点")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getCurrentKey}},[e._v("保存")])],1),e._v(" "),a("div",{staticClass:"clearfix"}),e._v(" "),a("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticStyle:{height:"400px"}},[a("org-tree",{ref:"tree",attrs:{treeData:e.treeData,checkbox:e.treeCheckBox,checkStrictly:e.checkStrictly,defaultChecked:e.defaultChecked},on:{check:e.check}})],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(r,s,!1,function(e){a("r7Wu")},"data-v-4b29ab0c",null);t.default=i.exports}});
//# sourceMappingURL=5.6d1468ff87bb12e9839e.js.map