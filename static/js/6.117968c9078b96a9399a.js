webpackJsonprmsh([6,43,59,67],{"+Baw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"orgStaff",props:{orgCode:{type:String},labelNames:{type:String}},components:{},data:function(){return{labelPosition:"left",isEditShow:!0,isSaveShow:!1,formStaff:{b0111:"",b0201:"",b0204:"",b0207a:"",b0207b:"",b0211:"",b0214:"",b0217:"",b0221:"",b0224:"",b0227:"",b0231:"",b0234:"",b0237:"",b0241:"",b0244:"",b0247:"",b0251:"",b0254:"",b0257:"",b0261:"",b0264:"",b0267:""},editAble:!0}},computed:{},watch:{editAble:function(e){e?(this.isEditShow=!0,this.isSaveShow=!1):(this.isEditShow=!1,this.isSaveShow=!0)}},methods:{selectStaff:function(){var e=this;if(""!=e.orgCode){var t={b0111:e.orgCode};e.$axios.post(e.$api.org.selectB02Byb0111,t).then(function(t){if(0===t.data.code){var a=t.data;a.data?e.formStaff=a.data:e.clearForm()}else e.$message.error(t.data.msg)})}},editStaff:function(){this.editAble=!1},deleteStaff:function(){var e=this,t=this;t.editAble=!0,t.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(""!=t.orgCode){var e={b0111:t.orgCode};t.$axios.post(t.$api.org.deleteB02,e).then(function(e){0===e.data.code?(t.$message.success("删除成功"),t.selectStaff()):t.$message.error(e.data.msg)})}}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},clearForm:function(){this.formStaff={b0111:"",b0201:"",b0204:"",b0207a:"",b0207b:"",b0211:"",b0214:"",b0217:"",b0221:"",b0224:"",b0227:"",b0231:"",b0234:"",b0237:"",b0241:"",b0244:"",b0247:"",b0251:"",b0254:"",b0257:"",b0261:"",b0264:"",b0267:""}},saveStaff:function(){var e=this;if(e.editAble=!0,""!=e.orgCode){var t=e.formStaff,a=e.$api.org.updateB02;""==t.b0111&&(e.formStaff.b0111=e.orgCode,a=e.$api.org.insertB02),e.$axios.post(a,t).then(function(t){0===t.data.code?(e.$message.success("保存成功"),e.cancelStaff()):e.$message.error(t.data.msg)})}},cancelStaff:function(){this.isEditShow=!0,this.isSaveShow=!1,this.editAble=!0}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgStaff"},[a("div",{staticClass:"fileTitle"},[a("span",{staticClass:"explain"},[a("i",{staticClass:"el-icon-more"}),e._v("\n    "+e._s(e.labelNames)+"\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditShow,expression:"isEditShow"}],staticClass:"btnStaff"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editStaff}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.deleteStaff}},[e._v("删除")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSaveShow,expression:"isSaveShow"}],staticClass:"btnStaff"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveStaff}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.cancelStaff}},[e._v("取消")])],1)]),e._v(" "),a("el-form",{ref:"formStaff",attrs:{"label-position":e.labelPosition,"label-width":"260px",model:e.formStaff,disabled:e.editAble,size:"small"}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制批准日期"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0201,callback:function(t){e.$set(e.formStaff,"b0201",t)},expression:"formStaff.b0201"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制批准文号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0204,callback:function(t){e.$set(e.formStaff,"b0204",t)},expression:"formStaff.b0204"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制批准机关名称"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0207a,callback:function(t){e.$set(e.formStaff,"b0207a",t)},expression:"formStaff.b0207a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制批准机关代码"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0207b,callback:function(t){e.$set(e.formStaff,"b0207b",t)},expression:"formStaff.b0207b"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内设机构数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0211,callback:function(t){e.$set(e.formStaff,"b0211",t)},expression:"formStaff.b0211"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内设机构名称"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0214,callback:function(t){e.$set(e.formStaff,"b0214",t)},expression:"formStaff.b0214"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内设机构级别"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0217,callback:function(t){e.$set(e.formStaff,"b0217",t)},expression:"formStaff.b0217"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制性质"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0221,callback:function(t){e.$set(e.formStaff,"b0221",t)},expression:"formStaff.b0221"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"批准编制总数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0224,callback:function(t){e.$set(e.formStaff,"b0224",t)},expression:"formStaff.b0224"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"行政编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0227,callback:function(t){e.$set(e.formStaff,"b0227",t)},expression:"formStaff.b0227"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"事业编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0231,callback:function(t){e.$set(e.formStaff,"b0231",t)},expression:"formStaff.b0231"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0234,callback:function(t){e.$set(e.formStaff,"b0234",t)},expression:"formStaff.b0234"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社团编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0237,callback:function(t){e.$set(e.formStaff,"b0237",t)},expression:"formStaff.b0237"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位领导职数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0241,callback:function(t){e.$set(e.formStaff,"b0241",t)},expression:"formStaff.b0241"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位领导同级非领导职务职数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0244,callback:function(t){e.$set(e.formStaff,"b0244",t)},expression:"formStaff.b0244"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内设第一级机构领导职数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0247,callback:function(t){e.$set(e.formStaff,"b0247",t)},expression:"formStaff.b0247"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内设第一级机构领导同级非领导职务"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0251,callback:function(t){e.$set(e.formStaff,"b0251",t)},expression:"formStaff.b0251"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"业务人员编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0254,callback:function(t){e.$set(e.formStaff,"b0254",t)},expression:"formStaff.b0254"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工勤人员编制数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0257,callback:function(t){e.$set(e.formStaff,"b0257",t)},expression:"formStaff.b0257"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用全额拨款人数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0261,callback:function(t){e.$set(e.formStaff,"b0261",t)},expression:"formStaff.b0261"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用差额拨款人数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0264,callback:function(t){e.$set(e.formStaff,"b0264",t)},expression:"formStaff.b0264"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用自筹资金人数"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formStaff.b0267,callback:function(t){e.$set(e.formStaff,"b0267",t)},expression:"formStaff.b0267"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(e){a("AoGo")},"data-v-78dea346",null);t.default=l.exports},"+Ww4":function(e,t){},"46tJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("NhK2"),r=a("aaCn"),l=a("TkIq"),s={name:"orgManage",components:{orgMerge:o.default,orgDemerge:r.default,orgSort:l.default},props:{orgCode:{type:String},labelName:{type:String}},data:function(){return{clickNode:!1,dialogSortVisible:!1,dialogTitle:"权限设置",dialogSortTitle:"下级机构排序",dialogGrantVisible:!1,addDemergeVisible:!1,edit:!0,orgRules:{b0101:[{required:!0,message:"请输入机构名称",trigger:"blur"}],b0114:[{required:!0,message:"请输入机构编码",trigger:"blur"}]},flag:!1,addOrderVisible:!1,isOperation:!0,isChecked:!1,radio:3,filterText:"",OrgNameQuery:[],orgDataTree:[],orgForm:{},orgForm2:{},orgForm3:{},b0194:"1",b0121:"",orgDicData:{}}},computed:{},watch:{edit:function(e){e?(this.isOperation=!0,this.isChecked=!1):(this.isOperation=!1,this.isChecked=!0)}},methods:{sortOrg:function(){var e=this;e.orgCode?(e.dialogSortVisible=!0,setTimeout(function(){e.$refs.contentTable.selectOrgSort()},10)):this.$message.warning("请选择需要授权的机构")},dialogSortClose:function(){this.dialogSortVisible=!1},toAdd:function(){this.addOrderVisible=!0},toDemerge:function(){this.addDemergeVisible=!0},selectOrgById:function(){var e=this;if(""!=e.orgCode){var t={b0111:e.orgCode};e.$axios.post(e.$api.org.selectOrgByB0111,t).then(function(t){if(0===t.data.code){var a=t.data;e.b0121=a.data.b0111,e.b0194=a.data.b0194,e.orgForm=a.data,e.orgForm2=a.data,e.orgForm3=a.data}else e.$message.error(t.data.msg)})}},updateOrg:function(){this.flag=!0,this.edit=!1},deleOrg:function(e){var t=this,a=this;a.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={b0111:e.b0111};a.$axios.post(a.$api.org.deleteOrg,t).then(function(e){0===e.data.code?a.$emit("selectOrgTree"):a.$message.error(e.data.msg)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addOrg:function(){if(null===this.orgCode||""===this.orgCode)return this.$message.warning("请先选择机构"),!1;this.flag=!1,this.orgForm={},this.orgForm2={},this.orgForm3={},this.edit=!1},saveOrg:function(e,t,a){var o=this;o.btnEnable=!0;var r={},l="";"1"==o.b0194?(l="orgForm",(r=e).b0194=o.b0194):"2"==o.b0194?(l="orgForm2",(r=t).b0194=o.b0194):(l="orgForm3",(r=a).b0194=o.b0194),this.$refs[l].validate(function(e){e&&(!1===o.flag?(r.b0121=o.b0121,o.$axios.post(o.$api.org.insertOrg,r).then(function(e){0===e.data.code?(o.$message.success(e.data.msg),o.$emit("selectOrgTree"),o.btnEnable=!1,o.cancelOrg()):o.$message.error(e.data.msg)})):o.$axios.post(o.$api.org.updateOrg,r).then(function(e){0===e.data.code?(o.$message.success(e.data.msg),o.$emit("selectOrgTree"),o.btnEnable=!1,o.cancelOrg()):o.$message.error(e.data.msg)}))})},cancelOrg:function(){this.edit=!0}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgManage"},[a("div",{staticClass:"orgButton"},[a("div",{staticClass:"left"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOperation,expression:"isOperation"}],staticStyle:{"padding-right":"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.updateOrg}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleOrg(e.orgForm)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addOrg}},[e._v("新建下级机构")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.sortOrg}},[e._v("下级机构排序")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChecked,expression:"isChecked"}],staticStyle:{"padding-right":"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveOrg(e.orgForm,e.orgForm2,e.orgForm3)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.cancelOrg}},[e._v("取消")])],1)]),e._v(" "),a("div",{staticClass:"form"},[a("div",{staticClass:"orgType"},[a("div",{staticClass:"orgtag"},[e._v("机构标识:")]),e._v(" "),a("el-radio-group",{staticClass:"radio-group",model:{value:e.b0194,callback:function(t){e.b0194=t},expression:"b0194"}},[a("el-radio",{attrs:{label:"1"}},[e._v("法人机构")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("内设机构")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("机构分组")])],1)],1),e._v(" "),"1"==e.b0194?a("div",{},[a("el-form",{ref:"orgForm",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm,rules:e.orgRules,size:"small"}},[a("el-form-item",{attrs:{label:"机构全称：",prop:"b0101"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm.b0101,callback:function(t){e.$set(e.orgForm,"b0101",t)},expression:"orgForm.b0101"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm.b0104,callback:function(t){e.$set(e.orgForm,"b0104",t)},expression:"orgForm.b0104"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm.b0114,callback:function(t){e.$set(e.orgForm,"b0114",t)},expression:"orgForm.b0114"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在政区：",prop:"b0117"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入所在政区",disabled:e.edit},model:{value:e.orgForm.b0117,callback:function(t){e.$set(e.orgForm,"b0117",t)},expression:"orgForm.b0117"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"隶属关系：",prop:"b0124"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入隶属关系",disabled:e.edit},model:{value:e.orgForm.b0124,callback:function(t){e.$set(e.orgForm,"b0124",t)},expression:"orgForm.b0124"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位性质类别：",prop:"b0131"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入性质类别",disabled:e.edit},model:{value:e.orgForm.b0131,callback:function(t){e.$set(e.orgForm,"b0131",t)},expression:"orgForm.b0131"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位级别：",prop:"b0107"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入级别",disabled:e.edit},model:{value:e.orgForm.b0127,callback:function(t){e.$set(e.orgForm,"b0127",t)},expression:"orgForm.b0127"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm.b0134,callback:function(t){e.$set(e.orgForm,"b0134",t)},expression:"orgForm.b0134"}})],1)],1)],1)],1):e._e(),e._v(" "),"2"==e.b0194?a("div",{},[a("el-form",{ref:"orgForm2",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm2,size:"small"}},[a("el-form-item",{attrs:{label:"机构全称：",prop:""}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm2.b0101,callback:function(t){e.$set(e.orgForm2,"b0101",t)},expression:"orgForm2.b0101"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm2.b0104,callback:function(t){e.$set(e.orgForm2,"b0104",t)},expression:"orgForm2.b0104"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm2.b0114,callback:function(t){e.$set(e.orgForm2,"b0114",t)},expression:"orgForm2.b0114"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位级别：",prop:"b0107"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入级别",disabled:e.edit},model:{value:e.orgForm2.b0127,callback:function(t){e.$set(e.orgForm2,"b0127",t)},expression:"orgForm2.b0127"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm2.b0134,callback:function(t){e.$set(e.orgForm2,"b0134",t)},expression:"orgForm2.b0134"}})],1)],1)],1)],1):e._e(),e._v(" "),"3"==e.b0194?a("div",{},[a("el-form",{ref:"orgForm3",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm3,size:"small"}},[a("el-form-item",{attrs:{label:"机构全称：",prop:""}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm3.b0101,callback:function(t){e.$set(e.orgForm3,"b0101",t)},expression:"orgForm3.b0101"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm3.b0104,callback:function(t){e.$set(e.orgForm3,"b0104",t)},expression:"orgForm3.b0104"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm3.b0114,callback:function(t){e.$set(e.orgForm3,"b0114",t)},expression:"orgForm3.b0114"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[a("el-col",{attrs:{span:16}},[a("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm3.b0134,callback:function(t){e.$set(e.orgForm3,"b0134",t)},expression:"orgForm3.b0134"}})],1)],1)],1)],1):e._e()]),e._v(" "),e.addOrderVisible?a("org-merge",{ref:"orderAdd",attrs:{visible:e.addOrderVisible},on:{"update:visible":function(t){e.addOrderVisible=t}}}):e._e(),e._v(" "),e.addDemergeVisible?a("org-demerge",{ref:"orderAdd",attrs:{visible:e.addDemergeVisible},on:{"update:visible":function(t){e.addDemergeVisible=t}}}):e._e(),e._v(" "),a("div",[a("el-dialog",{staticStyle:{padding:"1px 20px"},attrs:{title:e.dialogSortTitle,visible:e.dialogSortVisible,"before-close":e.dialogSortClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogSortVisible=t}}},[a("org-sort",{ref:"contentTable",attrs:{orgId:e.b0121,labelNames:e.labelName},on:{dialogSortClose:e.dialogSortClose}})],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(e){a("+Ww4")},"data-v-41902584",null);t.default=n.exports},AoGo:function(e,t){},"Aq+z":function(e,t){},GpOK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("46tJ"),r=a("+Baw"),l=a("WprJ"),s={name:"orgInformationManage",components:{orgManage:o.default,orgStaff:r.default,orgFileUpload:l.default},props:[""],data:function(){return{Height:{height:document.documentElement.clientHeight-235+"px"},clickNode:!1,filterText:"",activeName:"first",isUpdateManage:!0,isUpdateStaff:!1,isUpdateFile:!1,orgId:"",labelNames:"",orgDataTree:[],tabname:"first"}},computed:{},watch:{filterText:function(e){this.$refs.tree3.filter(e)}},methods:{filterNode:function(e,t,a){if(!e)return!0;a.level;var o=[];this.getReturnNode(a,o,e);var r=!1;return o.forEach(function(e){r=r||e}),r},getReturnNode:function(e,t,a){var o=e.data&&e.data.label&&-1!==e.data.label.indexOf(a);o&&t.push(o),!o&&1!=e.level&&e.parent&&this.getReturnNode(e.parent,t,a)},selectOrgTree:function(){var e=this;e.$axios.post(e.$api.org.selectOrgTree).then(function(t){if(0===t.data.code){var a=t.data;e.orgDataTree=a.data}else e.$message.error(t.data.msg)})},handleNodeOrgTreeClick:function(e){var t=this;t.orgId=e.id,t.labelNames=e.label,"first"===t.tabname?setTimeout(function(){t.$refs.changeManage.selectOrgById(),t.$refs.changeManage.labelNames=t.labelNames,t.$refs.changeManage.edit=!0},10):"second"===t.tabname?setTimeout(function(){t.$refs.changeStaff.selectStaff(),t.$refs.changeStaff.labelNames=t.labelNames,t.$refs.changeStaff.editAble=!0},10):setTimeout(function(){t.$refs.changeFile.selectAttachment(),t.$refs.changeFile.labelNames=t.labelNames},10)},handleClick:function(e){var t=this;t.tabname=e.name,"first"===e.name?(t.isUpdateManage=!0,t.isUpdateStaff=!1,t.isUpdateFile=!1,t.orgId&&setTimeout(function(){t.$refs.changeManage.selectOrgById(),t.$refs.changeManage.labelNames=t.labelNames},10)):"second"==e.name?(t.isUpdateManage=!1,t.isUpdateStaff=!0,t.isUpdateFile=!1,setTimeout(function(){t.$refs.changeStaff.selectStaff(),t.$refs.changeStaff.labelNames=t.labelNames},10)):(t.isUpdateManage=!1,t.isUpdateStaff=!1,t.isUpdateFile=!0,setTimeout(function(){t.$refs.changeFile.selectAttachment(),t.$refs.changeFile.labelNames=t.labelNames},10))}},created:function(){this.selectOrgTree()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgInformationManage"},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{attrs:{width:"20%"}},[a("el-input",{staticStyle:{padding:"0px 10px 10px"},attrs:{placeholder:"机构简称",size:"small"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-scrollbar",{style:e.Height},[a("div",{staticClass:"organization-tree"},[a("el-tree",{ref:"tree3",attrs:{data:e.orgDataTree,"node-key":"id","highlight-current":"","expand-on-click-node":e.clickNode,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeOrgTreeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return a("div",{staticClass:"custom-tree-node"},[a("div",[a("span",{staticClass:"danwei"}),e._v("\n                "+e._s(o.label)+"\n              ")])])}}])})],1)])],1),e._v(" "),a("el-main",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{key:"first",attrs:{label:"机构信息",name:"first"}},[e.isUpdateManage?a("org-manage",{ref:"changeManage",attrs:{orgCode:e.orgId,labelName:e.labelNames},on:{selectOrgTree:e.selectOrgTree}}):e._e()],1),e._v(" "),a("el-tab-pane",{key:"second",attrs:{label:"编制信息",name:"second"}},[e.isUpdateStaff?a("org-staff",{ref:"changeStaff",attrs:{orgCode:e.orgId,labelName:e.labelNames}}):e._e()],1),e._v(" "),a("el-tab-pane",{key:"three",attrs:{label:"关联附件",name:"three"}},[e.isUpdateFile?a("org-file-upload",{ref:"changeFile",attrs:{orgCode:e.orgId,labelName:e.labelNames}}):e._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(e){a("Aq+z")},"data-v-4bccc134",null);t.default=n.exports},S1XS:function(e,t){},WprJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("lQQE"),r={name:"orgFileUpload",props:{orgCode:{type:String},labelNames:{type:String}},components:{orgFilePreview:o.default},data:function(){return{tableData:[],fileData:new FormData,multipleSelection:[]}},computed:{},watch:{},methods:{selectAttachment:function(){var e=this;if(""!=e.orgCode){var t={b0111:e.orgCode};e.$axios.post(e.$api.org.selectAttachmentByB0111,t).then(function(t){if(0===t.data.code){var a=t.data;e.tableData=a.data}else e.$message.error(t.data.msg)})}},handleDelete:function(e,t){var a=this,o=this;o.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$axios.post(o.$api.org.deleteAttachmentById,t).then(function(e){0===e.data.code?(o.$message.success(e.data.msg),o.selectAttachment()):o.$message.error(e.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},uploadFile:function(e){this.fileData.append("files",e.file)},submitUpload:function(){var e=this;e.$refs.upload.submit(),e.fileData.append("orgCode",e.orgCode);e.$axios.post(e.$api.org.uplodeB01Attachment,this.fileData,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[function(e){return e}]}).then(function(t){0===t.data.code?(e.$message({message:"上传成功",type:"success"}),e.$refs.upload.clearFiles(),e.fileData=new FormData,e.selectAttachment()):(e.fileData.delete("orgCode"),e.$message({message:"上传失败，请重试",type:"error"}))})},downLoadFile:function(e,t){this.$axios({url:this.$api.org.downloadB01Attachment,data:t,method:"post",responseType:"blob"}).then(function(e){var a=new Blob([e.data]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,t.fileName);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(a),o.download=t.fileName,o.click(),window.URL.revokeObjectURL(o.href)}})},handleEdit:function(e,t){this.$refs.changePreview.previewPdf(t)},handleSelectionChange:function(e){this.multipleSelection=e}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgFile"},[a("div",{staticClass:"fileTitle"},[a("span",{staticClass:"explain"},[a("i",{staticClass:"el-icon-more"}),e._v("\n    "+e._s(e.labelNames)+"\n  ")]),e._v(" "),a("div",{staticClass:"upload-container"},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{multiple:"",action:"","auto-upload":!1,"http-request":e.uploadFile}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.submitUpload}},[e._v("上传到服务器\n                ")])],1)],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"摘要","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileSize",label:"文件大小","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadTime",label:"上传时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"primary",title:"预览",circle:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-close-solid",title:"删除",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"primary",title:"下载",circle:""},on:{click:function(a){return e.downLoadFile(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("org-file-preview",{ref:"changePreview"})],1)},staticRenderFns:[]};var s=a("C7Lr")(r,l,!1,function(e){a("S1XS")},"data-v-35c9c0ea",null);t.default=s.exports}});
//# sourceMappingURL=6.117968c9078b96a9399a.js.map