webpackJsonprmsh([19,66],{"Rz/w":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),n=a("0xDb"),o=a("opmS"),r=a("NxFF"),l={name:"subsystem-administrator-index",props:["siteContentViewHeight"],components:{addsubsystemdialog:o.default,pagination:r.a},data:function(){return{pageObj:{sysName:"",pageIndex:this.API.constObj.pageIndex,pageSize:this.API.constObj.pageSize,total:0},dataList:[],addSubsystemVisiable:!1,isEdit:"",checkedData:{},tableDataSelections:[]}},computed:{newDataList:function(){var t=this,e=this.dataList;return""!==this.pageObj.sysName&&(e=this.dataList.filter(function(e){return e.sysName.indexOf(t.pageObj.sysName)>-1})),e}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getApplySystemInfoSystem),method:"post",data:this.$http.adornData({sysName:this.pageObj.sysName,size:this.pageObj.pageSize,current:this.pageObj.pageIndex+1})}).then(function(e){var a=e.data;0===a.code?(t.dataList=a.data.records,t.pageObj.total=a.data.total):t.$message.error(a.msg)})},addSubsystem:function(){this.title="添加",this.isEdit=!0,this.addSubsystemVisiable=!0},editSubsystem:function(t,e){this.checkedData=e,this.title="编辑",this.isEdit=!1,this.addSubsystemVisiable=!0},deleSubsystem:function(t,e){var a=this;this.$confirm("确定删除选中记录?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deleteSystem),method:"post",data:a.$http.adornData({sysId:e.sysId})}).then(function(t){var e=t.data;0===e.code?(a.getDataList(),a.$message.success("删除成功")):a.$message.error(e.msg)})}).catch(function(){})},selectionChangeHandle:function(t){this.tableDataSelections=t},moveDirection:function(t){if(0!==this.tableDataSelections.length){var e,a=this;a.tableDataSelections.sort(function(t,e){return a.dataList.indexOf(t)-a.dataList.indexOf(e)}),"down"==t&&a.tableDataSelections.reverse(),a.tableDataSelections.forEach(function(s){e=a.dataList.indexOf(s),"up"==t?a.moveUp(e):"down"==t&&a.moveDown(e)})}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveUp:function(t){0!=t&&(this.dataList=Object(n.d)(this.dataList,t,t-1,"up"))},moveDown:function(t){t!=this.dataList.length-1&&(this.dataList=Object(n.d)(this.dataList,t,t+1,"down"))},sortSys:function(){var t=this,e=[];this.dataList.length<0||(this.dataList.forEach(function(t,a){e.push({id:t.sysId,orderno:a+1})}),this.$http({url:this.$http.adornUrl(this.API.systemSortSystem),method:"post",data:this.$http.adornData({data:i()(e)})}).then(function(e){var a=e.data;a&&0===a.code?(t.getDataList(),t.$message.success("操作成功")):t.$message.error(a.msg)}))},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getDataList()},addback:function(t){this.addSubsystemVisiable=!1,t&&this.getDataList()},PageTurning:function(t){this.pageObj.pageIndex=t.page_index,this.pageObj.pageSize=t.page_size,this.getDataList()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("div",{staticClass:"subsystem-administrator-container",staticStyle:{width:"100%"}},[a("div",{staticClass:"table-header-btn"},[a("div",{staticClass:"table-header-btn-l"},[a("el-input",{attrs:{size:"small",placeholder:"请输入系统名称"},model:{value:t.pageObj.sysName,callback:function(e){t.$set(t.pageObj,"sysName",e)},expression:"pageObj.sysName"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.search()}}},[t._v("检索")])],1),t._v(" "),a("div",{staticClass:"table-header-btn-r"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addSubsystem()}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.sortSys()}}},[t._v("保存排序")])],1)]),t._v(" "),a("el-table",{ref:"subsystemIndexTable",attrs:{data:t.newDataList,height:t.siteContentViewHeight-100+"px"},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageObj.pageIndex*t.pageObj.pageSize+e.$index+1)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"子系统代码",prop:"sysCode"}}),t._v(" "),a("el-table-column",{attrs:{label:"子系统名称",prop:"sysName"}}),t._v(" "),a("el-table-column",{attrs:{label:"子系统类型",prop:"sysName"}}),t._v(" "),a("el-table-column",{attrs:{label:"子系统状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.sysStsatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("停用")]):a("el-tag",{attrs:{size:"small"}},[t._v("启用")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.editSubsystem(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return t.deleSubsystem(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",[a("pagination",{attrs:{pageIndex:t.pageObj.pageIndex,total:t.pageObj.total,pageSizes:[10,20,30,40],pageSize:t.pageObj.pageSize},on:{PageTurning:t.PageTurning}})],1)],1),t._v(" "),t.addSubsystemVisiable?a("el-dialog",{attrs:{title:t.title,width:"50%",visible:t.addSubsystemVisiable,"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(e){t.addSubsystemVisiable=e}}},[a("addsubsystemdialog",{attrs:{checkedData:t.checkedData,isEdit:t.isEdit},on:{addback:t.addback}})],1):t._e()],1)},staticRenderFns:[]};var c=a("C7Lr")(l,d,!1,function(t){a("lXkl")},"data-v-9161291e",null);e.default=c.exports},lMX7:function(t,e){},lXkl:function(t,e){},opmS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"add-subsystem-dialog",props:["checkedData","isEdit"],data:function(){return{rules:{sysCode:[{required:!0,message:"请输入子系统代码",trigger:"change"}],sysName:[{required:!0,message:"请输入子系统名称",trigger:"change"}]},dataForm:{sysCode:"",sysName:"",sysStsatus:0,sysDesc:"",sysId:"",sysIcon:"",sysPath:""}}},created:function(){this.setFormData()},methods:{setFormData:function(){!1===this.isEdit&&(this.dataForm.sysCode=this.checkedData.sysCode,this.dataForm.sysName=this.checkedData.sysName,this.dataForm.sysStsatus=Number(this.checkedData.sysStsatus),this.dataForm.sysDesc=this.checkedData.sysDesc,this.dataForm.sysId=this.checkedData.sysId)},saveArea:function(){var t=this;this.$refs.addForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl(t.API.savaOrUpdateSystem),method:"post",data:t.$http.adornData(t.dataForm)}).then(function(e){var a=e.data;0==a.code?(t.$message({message:"成功",type:"success"}),t.$emit("addback",!0)):t.$message.error(a.msg)})})},cancle:function(){this.$emit("addback",!1)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"addForm",attrs:{rules:t.rules,model:t.dataForm,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"子系统代码",prop:"sysCode"}},[a("el-input",{attrs:{type:"text",maxlength:"15",placeholder:"请输入区域代码"},model:{value:t.dataForm.sysCode,callback:function(e){t.$set(t.dataForm,"sysCode",e)},expression:"dataForm.sysCode"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"子系统名称",prop:"sysName"}},[a("el-input",{attrs:{type:"text",maxlength:"10",placeholder:"请输入区域名称"},model:{value:t.dataForm.sysName,callback:function(e){t.$set(t.dataForm,"sysName",e)},expression:"dataForm.sysName"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"子系统状态",prop:"sysStsatus"}},[a("el-radio-group",{model:{value:t.dataForm.sysStsatus,callback:function(e){t.$set(t.dataForm,"sysStsatus",e)},expression:"dataForm.sysStsatus"}},[a("el-radio",{attrs:{label:0}},[t._v("停用")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("启用")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"子系统描述",prop:"sysDesc"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.dataForm.sysDesc,callback:function(e){t.$set(t.dataForm,"sysDesc",e)},expression:"dataForm.sysDesc"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveArea()}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.cancle()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(t){a("lMX7")},null,null);e.default=n.exports}});
//# sourceMappingURL=19.4097e96e8bf7e1f9f7d3.js.map