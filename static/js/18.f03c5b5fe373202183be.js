webpackJsonprmsh([18,35],{"51L4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("3cXf"),i=r.n(a),n=r("LPKB"),o=r("0xDb"),u={name:"commonQuery",components:{queryUpdate:n.default},props:["siteContentViewHeight"],data:function(){return{Height:{height:document.documentElement.clientHeight-200+"px"},queryUpdateVisable:!1,dialogTitle:"",search:{org:"",code:"",name:""},treeData:[],nodeId:"",tableData:[],currentRow:{},isEdit:!0,keyWord:"",page:{pageNum:1,pageSize:10,pageSizes:[10,20,30,40,50],total:0},flag:!1}},created:function(){this.getQueryData()},methods:{indexMethod:function(e){return e+1},getQueryData:function(){var e=this;e.$http({url:e.$http.adornUrl(e.API.getSysPowerquery),method:"post",data:e.$http.adornData({orgId:e.search.org,queryCode:e.search.code,queryName:e.search.name})}).then(function(t){var r=t.data;0===r.code?e.tableData=r.data.records:e.$message.error(res.msg)}).catch(function(t){e.$message.error(t)})},handleSizeChange:function(e){this.page.pageSize=e,this.getQueryData()},handleCurrentChange:function(e){this.page.pageNum=e,this.getQueryData()},searchUser:function(){this.getQueryData()},addQuery:function(){this.currentRow.orgId=this.nodeId,this.dialogTitle="添加查询条件",this.queryUpdateVisable=!0,this.isEdit=!1},updateQuery:function(e){this.currentRow=e,this.dialogTitle="编辑查询条件",this.queryUpdateVisable=!0,this.isEdit=!0},updateCallback:function(e){e&&this.getQueryData(),this.queryUpdateVisable=!1},delQuery:function(e){var t=this;this.$confirm("确定删除本条数据？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl(t.API.deleteSysPowerquery),method:"post",data:t.$http.adornData({queryId:e.queryId})}).then(function(e){0===e.data.code?(t.$message.success("删除成功"),t.getQueryData()):t.$message.error("删除失败")}).catch(function(e){})})},selectionChangeHandle:function(e){this.tableDataSelections=e},moveDirection:function(e){var t,r=this;r.tableDataSelections.sort(function(e,t){return r.tableData.indexOf(e)-r.tableData.indexOf(t)}),"down"==e&&r.tableDataSelections.reverse(),r.tableDataSelections.forEach(function(a){t=r.tableData.indexOf(a),"up"==e?r.moveUp(t):"down"==e&&r.moveDown(t)})},moveUp:function(e){0!=e&&(this.tableData=Object(o.d)(this.tableData,e,e-1,"up"))},moveDown:function(e){e!=this.tableData.length-1&&(this.tableData=Object(o.d)(this.tableData,e,e+1,"down"))},saveSort:function(){var e=this,t=[];this.tableData.length<0||(this.tableData.forEach(function(e,r){t.push({queryId:e.queryId,orderno:r+1})}),this.$http({url:this.$http.adornUrl(this.API.querySort),method:"post",data:this.$http.adornData({data:i()(t)})}).then(function(t){var r=t.data;r&&0===r.code?(e.getQueryData(),e.$message.success("操作成功")):e.$message.error(r.msg)}))}},watch:{filterText:function(e){this.$refs.orgTree.filter(e)},fullHeight:function(e){if(!this.timer){this.fullHeight=e,this.timer=!0;var t=this;setTimeout(function(){t.timer=!1},400)}}},mounted:function(){var e=this;window.addEventListener("resize",function(){return window.fullHeight=document.documentElement.clientHeight,void(e.fullHeight=window.fullHeight)},!1)}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"commonQuery"},[r("el-container",{style:{height:e.siteContentViewHeight+"px"}},[r("el-main",[r("div",{staticClass:"search table-header-btn"},[r("div",{staticClass:"table-header-btn-l"}),e._v(" "),r("div",{staticClass:"table-header-btn-r"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addQuery}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.moveDirection("up")}}},[e._v("上移")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.moveDirection("down")}}},[e._v("下移")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveSort}},[e._v("保存排序")])],1)]),e._v(" "),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{height:e.siteContentViewHeight-100+"px",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.selectionChangeHandle}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{width:"50px",fixed:"",type:"index",index:e.indexMethod,label:"序号",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"queryCode",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"queryName",label:"分类"}}),e._v(" "),r("el-table-column",{attrs:{prop:"queryStatus",label:"启用状态状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.queryStatus?r("el-tag",{attrs:{size:"medium",type:"danger"}},[e._v("禁用")]):"0"==t.row.queryStatus?r("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("启用")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",plain:"",type:"primary",title:"编辑"},on:{click:function(r){return e.updateQuery(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{title:"删除",size:"mini",plain:"",type:"danger"},on:{click:function(r){return e.delQuery(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-sizes":e.page.pageSizes,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.queryUpdateVisable?r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.queryUpdateVisable,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.queryUpdateVisable=t}}},[r("query-update",{attrs:{currentRow:e.currentRow,isEdit:e.isEdit},on:{updateCallback:e.updateCallback}})],1):e._e()],1)],1)],1)},staticRenderFns:[]};var l=r("C7Lr")(u,s,!1,function(e){r("qXbj")},"data-v-4e4246e6",null);t.default=l.exports},LPKB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=["常用条件查询","组合条件查询","干部培训查询","全程纪实查询"],i={name:"queryUpdate",props:["isEdit","currentRow"],components:{},data:function(){return{rules:{queryCode:[{required:!0,message:"请输入登录名",tigger:"change"},{min:3,max:20,message:"长度在 3 到 20个字符",trigger:"blur"}],queryName:[{required:!0,message:"请输入用户名",tigger:"change"},{min:3,max:20,message:"长度在 3 到 20个字符",trigger:"blur"}]},queryForm:{orgId:"",queryId:"",queryCode:"",queryName:"",queryStatus:"",queryEmail:"",queryPhone:"",queryType:""},formLabelWidth:"110px",flag:!1,checkList:a,checkedList:[]}},created:function(){this.isEdit&&(this.queryForm.orgId=this.currentRow.orgId,this.queryForm.queryId=this.currentRow.queryId,this.queryForm.queryCode=this.currentRow.queryCode,this.queryForm.queryName=this.currentRow.queryName,this.queryForm.queryStatus=this.currentRow.queryStatus,this.queryForm.queryType=this.currentRow.queryType,this.queryForm.queryEmail=this.currentRow.queryEmail,this.queryForm.queryPhone=this.currentRow.queryPhone)},methods:{handleCheckedChange:function(e){},saveUserManage:function(e){var t=this;this.$refs.queryForm.validate(function(r){if(!r)return!1;var a=t,i="";i=a.currentRow.queryId?a.API.updateSysPowerquery:a.API.insertSysPowerquery,a.$http({url:a.$http.adornUrl(i),method:"post",data:a.$http.adornData(e)}).then(function(e){0===e.data.code?(a.$message.success("操作成功"),t.$emit("updateCallback",!0)):a.$message.error("操作失败，请重新尝试")}).catch(function(e){})})},resetForm:function(e){var t=this;this.$nextTick(function(){void 0!==t.$refs[e]&&t.$refs[e].resetFields()})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"query-update"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules,size:"small"}},[r("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"queryName"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.queryForm.queryName,callback:function(t){e.$set(e.queryForm,"queryName",t)},expression:"queryForm.queryName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属分类",prop:"queryType","label-width":e.formLabelWidth}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.queryForm.queryType,callback:function(t){e.$set(e.queryForm,"queryType",t)},expression:"queryForm.queryType"}},[r("el-option",{attrs:{label:"基本信息",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"职务信息",value:"1"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"UI内容","label-width":e.formLabelWidth,prop:"queryName"}},[r("el-input",{attrs:{type:"textarea",rows:4,"auto-complete":"off"},model:{value:e.queryForm.queryName,callback:function(t){e.$set(e.queryForm,"queryName",t)},expression:"queryForm.queryName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字典项","label-width":e.formLabelWidth,prop:"queryName"}},[r("el-input",{attrs:{type:"textarea",rows:4,"auto-complete":"off"},model:{value:e.queryForm.queryName,callback:function(t){e.$set(e.queryForm,"queryName",t)},expression:"queryForm.queryName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"启用状态","label-width":e.formLabelWidth,prop:"queryStatus"}},[r("el-radio-group",{model:{value:e.queryForm.queryStatus,callback:function(t){e.$set(e.queryForm,"queryStatus",t)},expression:"queryForm.queryStatus"}},[r("el-radio",{attrs:{label:"0"}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:"1"}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"发布位置","label-width":e.formLabelWidth,prop:"queryStatus"}},[r("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.checkList,function(t){return r("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}),1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveUserManage(e.queryForm)}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.resetForm("queryForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var o=r("C7Lr")(i,n,!1,function(e){r("XFyS")},"data-v-bedb99ac",null);t.default=o.exports},XFyS:function(e,t){},qXbj:function(e,t){}});
//# sourceMappingURL=18.f03c5b5fe373202183be.js.map