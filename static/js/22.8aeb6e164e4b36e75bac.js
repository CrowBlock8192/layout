webpackJsonprmsh([22,51],{"0ZNV":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3cXf"),o=i.n(a),r=i("0xDb"),n={name:"dictionarySort",components:{},props:{itemPId:{type:String},dictcode:{type:String}},data:function(){return{tableData:[]}},computed:{},watch:{},methods:{indexMethod:function(t){return t+1},selectDictionarySort:function(){var t=this,e={};e.itemPid=t.itemPId,e.dictCode=t.dictcode,this.$http({url:this.$http.adornUrl(this.API.getDictItemListByCode),method:"post",data:this.$http.adornData(e)}).then(function(e){var i=e.data;0===i.code?t.tableData=i.data.data:t.$message.error(i.data.msg)}).catch(function(t){this.$message.error(t)})},selectionChangeHandle:function(t){this.tableDataSelections=t},moveDirection:function(t){var e,i=this;i.tableDataSelections.sort(function(t,e){return i.tableData.indexOf(t)-i.tableData.indexOf(e)}),"down"==t&&i.tableDataSelections.reverse(),i.tableDataSelections.forEach(function(a){e=i.tableData.indexOf(a),"up"==t?i.moveUp(e):"down"==t&&i.moveDown(e)})},moveUp:function(t){0!=t&&(this.tableData=Object(r.d)(this.tableData,t,t-1,"up"))},moveDown:function(t){t!=this.tableData.length-1&&(this.tableData=Object(r.d)(this.tableData,t,t+1,"down"))},saveSort:function(){var t=this,e=[];this.tableData.length<0||(this.tableData.forEach(function(t,i){e.push({itemId:t.itemId,orderno:i+1})}),this.$http({url:this.$http.adornUrl(this.API.dictItemSort),method:"post",data:this.$http.adornData({data:o()(e)})}).then(function(e){var i=e.data;i&&0===i.code?(t.$emit("dialogSortClose"),t.$emit("selectItemCode"),t.$message.success("操作成功")):t.$message.error(i.msg)}))}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sortBody"},[i("div",{staticClass:"saveBtn"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveSort}},[t._v("保存")])],1),t._v(" "),i("div",{staticClass:"sortFrom"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.selectionChangeHandle}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{width:"50px",fixed:"",type:"index",index:t.indexMethod,label:"序号",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"itemName",label:"名称",align:"center"}})],1)],1)])},staticRenderFns:[]};var s=i("C7Lr")(n,d,!1,function(t){i("wPxV")},"data-v-5baf90ea",null);e.default=s.exports},"N/m8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"dictionary",components:{dictionarySort:i("0ZNV").default},props:["siteContentViewHeight"],data:function(){return{Height:{height:document.documentElement.clientHeight-235+"px"},HeightMin:{height:document.documentElement.clientHeight-150+"px"},clickNode:!1,itemId:"",parentPId:"",dialogSortVisible:!1,dialogSortTitle:"同级排序",selectAble:!0,edit:!0,flag:!1,dictCodeId:"",dictCode:"",filterText:"",isChecked:!1,btnChangeEnable:!0,isOperation:!0,childrenData:[],dictData:[],dictMidData:[],defaultProps:{children:"children",label:"itemName"},dictFormTitle:"添加字典分类",dialogFormVisible:!1,addDictForm:{dictId:"",dictCode:"",dictName:"",dictType:""},dictRules:{dictCode:{required:!0,message:"请输入字典编号",trigger:"blur"},dictName:{required:!0,message:"请输入字典名称",trigger:"blur"},dictType:{required:!0,message:"请选择标准",trigger:"blur"}},formLabelWidth:"140px",dictionaryForm:{itemId:"",itemName:"",itemCode:"",dictCode:"",name:"",itemSname:"",itemDesc:"",itemLogospell:"",itemCompspell:"",itemIsleaf:"1",itemStatus:"1",itemPid:"-1",itemPcode:"-1"},dictItemRules:{itemCode:{required:!0,message:"请输入字典项编号",trigger:"blur"},itemName:{required:!0,message:"请输入字典项名称",trigger:"blur"}}}},methods:{filterNode:function(t,e,i){if(!t)return!0;i.level;var a=[];this.getReturnNode(i,a,t);var o=!1;return a.forEach(function(t){o=o||t}),o},getReturnNode:function(t,e,i){var a=t.data&&t.data.name&&-1!==t.data.name.indexOf(i);a&&e.push(a),!a&&1!=t.level&&t.parent&&this.getReturnNode(t.parent,e,i)},IsDictionarySort:function(){var t=this;t.itemId?(t.dialogSortVisible=!0,setTimeout(function(){t.$refs.contentTable.selectDictionarySort()},10)):this.$message.warning("请选择需要排序的机构")},dialogSortClose:function(){this.dialogSortVisible=!1},selectDictManage:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDataDictTree),method:"post",data:this.$http.adornData({})}).then(function(e){var i=e.data;0===i.code?t.dictData=i.data.data:t.$message.error(i.msg)})},handleInputConfirm:function(){var t=this;t.$http({url:t.$http.adornUrl(t.API.checkDictCode),method:"post",data:t.$http.adornData({dictCode:t.addDictForm.dictCode})}).then(function(e){var i=e.data;if(0===i.code){if(0!==i.data.code)return void t.$message.error(i.data.msg);t.$message.success(i.data.msg)}else t.$message.error(i.msg)})},openAddDict:function(){this.addDictForm={dictId:"",dictCode:"",dictName:"",standard:""},this.dictFormTitle="添加字典分类",this.dialogFormVisible=!0},addDictionary:function(t){var e=!0;if(this.$refs.from.validate(function(t){t||(e=!1)}),e){var i=this;""==t.dictId?this.$http({url:this.$http.adornUrl(this.API.insertDataDict),method:"post",data:this.$http.adornData(t)}).then(function(t){var e=t.data;0===e.code?(i.dialogFormVisible=!1,i.$message.success("保存成功"),i.selectDictManage()):i.$message.error(e.msg)}):this.$http({url:this.$http.adornUrl(this.API.updateDataDict),method:"post",data:this.$http.adornData(t)}).then(function(t){var e=t.data;0===e.code?(i.dialogFormVisible=!1,i.$message.success("修改成功"),i.selectDictManage()):i.$message.error(e.msg)})}},resertDictionary:function(t){({})},handleNodeSystemClick:function(t){this.btnChangeEnable=!1,this.dictCode=t.id,"01"==t.id||"02"==t.id||"03"==t.id?this.dictCodeId="":this.dictCodeId=t.dictId,this.selectDictCode(),this.selectItemCode()},selectDictCode:function(){var t=this;if(""!=t.dictCodeId){var e={dictId:t.dictCodeId};this.$http({url:this.$http.adornUrl(this.API.getDictById),method:"post",data:this.$http.adornData(e)}).then(function(e){var i=e.data;0===i.code?t.addDictForm=i.data:t.$message.error(i.msg)})}},editDictManage:function(){this.dictFormTitle="编辑字典分类",this.dialogFormVisible=!0,delete this.addDictForm.orderno,delete this.addDictForm.dictStatus,delete this.addDictForm.dictDesc,delete this.addDictForm.orderno,delete this.addDictForm.createuser,delete this.addDictForm.createtime,delete this.addDictForm.modifyuser,delete this.addDictForm.modifytime},deleDictManage:function(){var t=this,e=this;e.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(e.dictCodeId){var i={dictId:e.dictCodeId};t.$http({url:t.$http.adornUrl(t.API.deleteDataDict),method:"post",data:t.$http.adornData(i)}).then(function(t){var i=t.data;0===i.code?(e.$message.success("删除成功"),e.selectDictManage()):e.$message.error(i.msg)})}}).catch(function(){})},selectItemCode:function(){var t=this;if(t.dictCode){var e={dictCode:t.dictCode};this.$http({url:this.$http.adornUrl(this.API.getDictItemTable),method:"post",data:this.$http.adornData(e)}).then(function(e){var i=e.data;0===i.code?(t.dictMidData=i.data,t.childrenData=[{itemId:"",itemName:" "}],t.extractChildren(t.dictMidData)):t.$message.error(i.msg)})}},extractChildren:function(t){if(t){var e=this;t.forEach(function(t){e.childrenData.push(t),t.children&&t.children.length>0&&e.extractChildren(t.children)})}},handleNodeSystemItemClick:function(t){this.itemId=t.id,this.dictCode=t.dictCode,this.parentPId=t.pId,this.dictionaryForm.itemId=t.itemId,this.dictionaryForm.itemName=t.itemName,this.dictionaryForm.itemCode=t.itemCode,this.dictionaryForm.dictCode=t.dictCode,this.dictionaryForm.name=t.name,this.dictionaryForm.itemSname=t.itemSname,this.dictionaryForm.itemDesc=t.itemDesc,this.dictionaryForm.itemLogospell=t.itemLogospell,this.dictionaryForm.itemCompspell=t.itemCompspell,this.dictionaryForm.itemIsleaf=t.itemIsleaf,this.dictionaryForm.itemStatus=t.itemStatus},changeParents:function(t){this.dictionaryForm.itemPid=t.itemId,this.dictionaryForm.itemPcode=t.itemCode},insertDictitem:function(){this.isOperation=!1,this.isChecked=!0,this.flag=!1,this.edit=!1,this.selectAble=!1,this.dictionaryForm.itemId=""},updateDictitem:function(){this.isOperation=!1,this.isChecked=!0,this.flag=!0,this.edit=!1,this.selectAble=!1},cancleDictitem:function(){this.isOperation=!0,this.isChecked=!1,this.edit=!0,this.selectAble=!0},deleDictitem:function(t){var e=this,i=this;i.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={itemId:t.itemId};i.$http({url:i.$http.adornUrl(i.API.deleteDataDictItem),method:"post",data:i.$http.adornData(e)}).then(function(t){var e=t.data;0===e.code?(i.$message.success(e.msg),i.selectItemCode()):i.$message.error(e.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleInputCode:function(){},addDictitem:function(t){var e=!0;if(this.$refs.dictionaryForm.validate(function(t){t||(e=!1)}),e){var i=this;i.btnChangeEnable=!0;var a=t;a.dictCode=i.dictCode,a.dictId=i.dictCodeId,!1===i.flag?i.$http({url:i.$http.adornUrl(i.API.insertDataDictItem),method:"post",data:i.$http.adornData(a)}).then(function(t){var e=t.data;0===e.code?(i.$message.success(e.msg),i.selectItemCode(),i.cancleDictitem()):i.$message.error(e.msg)}):i.$http({url:i.$http.adornUrl(i.API.updateDataDictItem),method:"post",data:i.$http.adornData(a)}).then(function(t){var e=t.data;0===e.code?(i.$message.success(e.msg),i.selectItemCode(),i.cancleDictitem()):i.$message.error(e.msg)})}}},watch:{filterText:function(t){this.$refs.tree1.filter(t)},fullHeight:function(t){if(!this.timer){this.fullHeight=t,this.timer=!0;var e=this;setTimeout(function(){e.timer=!1},10)}}},created:function(){this.selectDictManage()},mounted:function(){var t=this;window.onresize=function(){return window.fullHeight=document.documentElement.clientHeight,void(t.fullHeight=window.fullHeight)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticClass:"dictionary"},[i("el-container",{staticStyle:{height:"100%"}},[i("el-aside",{attrs:{width:"20%"}},[i("el-input",{staticStyle:{padding:"0px 10px 10px"},attrs:{placeholder:"字典查询",size:"small"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),i("div",{staticClass:"operateBar"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.openAddDict}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary",disabled:t.btnChangeEnable},on:{click:t.editDictManage}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger",disabled:t.btnChangeEnable},on:{click:t.deleDictManage}},[t._v("删除")])],1),t._v(" "),i("div",{staticClass:"organization-tree",style:{height:t.siteContentViewHeight-94+"px",overflow:"auto"}},[i("el-tree",{ref:"tree1",attrs:{data:t.dictData,"highlight-current":"","expand-on-click-node":t.clickNode,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeSystemClick},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("div",{staticClass:"custom-tree-node"},[i("div",[i("span",{staticClass:"bumen"}),t._v("\n                "+t._s(a.name)+"\n              ")])])}}])})],1)],1),t._v(" "),i("el-aside",{attrs:{width:"20%"}},[i("div",{style:{height:t.siteContentViewHeight-10+"px",overflow:"auto"}},[i("div",{staticClass:"organization-tree"},[i("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:t.dictMidData,"node-key":"id","highlight-current":"","expand-on-click-node":t.clickNode,props:t.defaultProps},on:{"node-click":t.handleNodeSystemItemClick},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("div",{staticClass:"custom-tree-node"},[i("div",[i("span",{staticClass:"bumen"}),t._v("\n                "+t._s(a.itemName)+"\n              ")])])}}])})],1)])]),t._v(" "),i("el-main",[i("div",{staticClass:"operationBtn"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOperation,expression:"isOperation"}]},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.insertDictitem}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.updateDictitem}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.deleDictitem(t.dictionaryForm)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.IsDictionarySort}},[t._v("同级排序")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isChecked,expression:"isChecked"}]},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addDictitem(t.dictionaryForm)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.cancleDictitem}},[t._v("取消")])],1)]),t._v(" "),i("el-form",{ref:"dictionaryForm",staticClass:"dictionaryForm",attrs:{model:t.dictionaryForm,"label-width":"100px",rules:t.dictItemRules,size:"small"}},[i("el-form-item",{attrs:{label:"编码",prop:"itemCode"}},[i("el-input",{attrs:{placeholder:"请输入字典项编码",disabled:t.edit},on:{blur:t.handleInputCode},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.dictionaryForm.itemCode,callback:function(e){t.$set(t.dictionaryForm,"itemCode","string"==typeof e?e.trim():e)},expression:"dictionaryForm.itemCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"itemName"}},[i("el-input",{attrs:{placeholder:"请输入字典名称",disabled:t.edit},model:{value:t.dictionaryForm.itemName,callback:function(e){t.$set(t.dictionaryForm,"itemName","string"==typeof e?e.trim():e)},expression:"dictionaryForm.itemName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"上级字典项"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{disabled:t.edit},on:{change:t.changeParents},model:{value:t.dictionaryForm.itemPcode,callback:function(e){t.$set(t.dictionaryForm,"itemPcode",e)},expression:"dictionaryForm.itemPcode"}},t._l(t.childrenData,function(t){return i("el-option",{key:t.itemId,attrs:{label:t.itemName,value:t}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"简称"}},[i("el-input",{attrs:{disabled:t.edit},model:{value:t.dictionaryForm.itemSname,callback:function(e){t.$set(t.dictionaryForm,"itemSname","string"==typeof e?e.trim():e)},expression:"dictionaryForm.itemSname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"全拼"}},[i("el-input",{attrs:{disabled:t.edit},model:{value:t.dictionaryForm.itemLogospell,callback:function(e){t.$set(t.dictionaryForm,"itemLogospell","string"==typeof e?e.trim():e)},expression:"dictionaryForm.itemLogospell"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"简拼"}},[i("el-input",{attrs:{disabled:t.edit},model:{value:t.dictionaryForm.itemCompspell,callback:function(e){t.$set(t.dictionaryForm,"itemCompspell","string"==typeof e?e.trim():e)},expression:"dictionaryForm.itemCompspell"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"使用标志"}},[i("el-select",{attrs:{disabled:t.selectAble},model:{value:t.dictionaryForm.itemStatus,callback:function(e){t.$set(t.dictionaryForm,"itemStatus",e)},expression:"dictionaryForm.itemStatus"}},[i("el-option",{attrs:{label:"使用",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"不使用",value:"0"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"是否子叶节点"}},[i("el-select",{attrs:{disabled:t.selectAble},model:{value:t.dictionaryForm.itemIsleaf,callback:function(e){t.$set(t.dictionaryForm,"itemIsleaf",e)},expression:"dictionaryForm.itemIsleaf"}},[i("el-option",{attrs:{label:"否",value:"0"}}),t._v(" "),i("el-option",{attrs:{label:"是",value:"1"}})],1)],1)],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.dictFormTitle,visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"from",attrs:{model:t.addDictForm,rules:t.dictRules,size:"small"}},[i("el-form-item",{attrs:{label:"编码","label-width":t.formLabelWidth,prop:"dictCode"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.addDictForm.dictCode,callback:function(e){t.$set(t.addDictForm,"dictCode","string"==typeof e?e.trim():e)},expression:"addDictForm.dictCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"名称","label-width":t.formLabelWidth,prop:"dictName"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addDictForm.dictName,callback:function(e){t.$set(t.addDictForm,"dictName","string"==typeof e?e.trim():e)},expression:"addDictForm.dictName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"字典标准","label-width":t.formLabelWidth,prop:"dictType"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addDictForm.dictType,callback:function(e){t.$set(t.addDictForm,"dictType",e)},expression:"addDictForm.dictType"}},[i("el-option",{attrs:{label:"国家标准",value:"01"}}),t._v(" "),i("el-option",{attrs:{label:"中组部标准",value:"02"}}),t._v(" "),i("el-option",{attrs:{label:"其他",value:"03"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addDictionary(t.addDictForm)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.resertDictionary(t.addDictForm)}}},[t._v("重置")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"container",staticStyle:{padding:"1px 20px"},attrs:{title:t.dialogSortTitle,visible:t.dialogSortVisible,"before-close":t.dialogSortClose},on:{"update:visible":function(e){t.dialogSortVisible=e}}},[i("dictionary-sort",{ref:"contentTable",attrs:{itemPId:t.parentPId,dictcode:t.dictCode},on:{dialogSortClose:t.dialogSortClose,selectItemCode:t.selectItemCode}})],1)],1)},staticRenderFns:[]};var r=i("C7Lr")(a,o,!1,function(t){i("UHLw")},"data-v-190120a1",null);e.default=r.exports},UHLw:function(t,e){},wPxV:function(t,e){}});
//# sourceMappingURL=22.8aeb6e164e4b36e75bac.js.map