webpackJsonprmsh([60],{"+Ww4":function(e,t){},"46tJ":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("NhK2"),a=o("aaCn"),s=o("TkIq"),i={name:"orgManage",components:{orgMerge:r.default,orgDemerge:a.default,orgSort:s.default},props:{orgCode:{type:String},labelName:{type:String}},data:function(){return{clickNode:!1,dialogSortVisible:!1,dialogTitle:"权限设置",dialogSortTitle:"下级机构排序",dialogGrantVisible:!1,addDemergeVisible:!1,edit:!0,orgRules:{b0101:[{required:!0,message:"请输入机构名称",trigger:"blur"}],b0114:[{required:!0,message:"请输入机构编码",trigger:"blur"}]},flag:!1,addOrderVisible:!1,isOperation:!0,isChecked:!1,radio:3,filterText:"",OrgNameQuery:[],orgDataTree:[],orgForm:{},orgForm2:{},orgForm3:{},b0194:"1",b0121:"",orgDicData:{}}},computed:{},watch:{edit:function(e){e?(this.isOperation=!0,this.isChecked=!1):(this.isOperation=!1,this.isChecked=!0)}},methods:{sortOrg:function(){var e=this;e.orgCode?(e.dialogSortVisible=!0,setTimeout(function(){e.$refs.contentTable.selectOrgSort()},10)):this.$message.warning("请选择需要授权的机构")},dialogSortClose:function(){this.dialogSortVisible=!1},toAdd:function(){this.addOrderVisible=!0},toDemerge:function(){this.addDemergeVisible=!0},selectOrgById:function(){var e=this;if(""!=e.orgCode){var t={b0111:e.orgCode};e.$axios.post(e.$api.org.selectOrgByB0111,t).then(function(t){if(0===t.data.code){var o=t.data;e.b0121=o.data.b0111,e.b0194=o.data.b0194,e.orgForm=o.data,e.orgForm2=o.data,e.orgForm3=o.data}else e.$message.error(t.data.msg)})}},updateOrg:function(){this.flag=!0,this.edit=!1},deleOrg:function(e){var t=this,o=this;o.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={b0111:e.b0111};o.$axios.post(o.$api.org.deleteOrg,t).then(function(e){0===e.data.code?o.$emit("selectOrgTree"):o.$message.error(e.data.msg)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addOrg:function(){if(null===this.orgCode||""===this.orgCode)return this.$message.warning("请先选择机构"),!1;this.flag=!1,this.orgForm={},this.orgForm2={},this.orgForm3={},this.edit=!1},saveOrg:function(e,t,o){var r=this;r.btnEnable=!0;var a={},s="";"1"==r.b0194?(s="orgForm",(a=e).b0194=r.b0194):"2"==r.b0194?(s="orgForm2",(a=t).b0194=r.b0194):(s="orgForm3",(a=o).b0194=r.b0194),this.$refs[s].validate(function(e){e&&(!1===r.flag?(a.b0121=r.b0121,r.$axios.post(r.$api.org.insertOrg,a).then(function(e){0===e.data.code?(r.$message.success(e.data.msg),r.$emit("selectOrgTree"),r.btnEnable=!1,r.cancelOrg()):r.$message.error(e.data.msg)})):r.$axios.post(r.$api.org.updateOrg,a).then(function(e){0===e.data.code?(r.$message.success(e.data.msg),r.$emit("selectOrgTree"),r.btnEnable=!1,r.cancelOrg()):r.$message.error(e.data.msg)}))})},cancelOrg:function(){this.edit=!0}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"orgManage"},[o("div",{staticClass:"orgButton"},[o("div",{staticClass:"left"}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isOperation,expression:"isOperation"}],staticStyle:{"padding-right":"10px"}},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.updateOrg}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleOrg(e.orgForm)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addOrg}},[e._v("新建下级机构")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.sortOrg}},[e._v("下级机构排序")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isChecked,expression:"isChecked"}],staticStyle:{"padding-right":"10px"}},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveOrg(e.orgForm,e.orgForm2,e.orgForm3)}}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.cancelOrg}},[e._v("取消")])],1)]),e._v(" "),o("div",{staticClass:"form"},[o("div",{staticClass:"orgType"},[o("div",{staticClass:"orgtag"},[e._v("机构标识:")]),e._v(" "),o("el-radio-group",{staticClass:"radio-group",model:{value:e.b0194,callback:function(t){e.b0194=t},expression:"b0194"}},[o("el-radio",{attrs:{label:"1"}},[e._v("法人机构")]),e._v(" "),o("el-radio",{attrs:{label:"2"}},[e._v("内设机构")]),e._v(" "),o("el-radio",{attrs:{label:"3"}},[e._v("机构分组")])],1)],1),e._v(" "),"1"==e.b0194?o("div",{},[o("el-form",{ref:"orgForm",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm,rules:e.orgRules,size:"small"}},[o("el-form-item",{attrs:{label:"机构全称：",prop:"b0101"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm.b0101,callback:function(t){e.$set(e.orgForm,"b0101",t)},expression:"orgForm.b0101"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm.b0104,callback:function(t){e.$set(e.orgForm,"b0104",t)},expression:"orgForm.b0104"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm.b0114,callback:function(t){e.$set(e.orgForm,"b0114",t)},expression:"orgForm.b0114"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"所在政区：",prop:"b0117"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入所在政区",disabled:e.edit},model:{value:e.orgForm.b0117,callback:function(t){e.$set(e.orgForm,"b0117",t)},expression:"orgForm.b0117"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"隶属关系：",prop:"b0124"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入隶属关系",disabled:e.edit},model:{value:e.orgForm.b0124,callback:function(t){e.$set(e.orgForm,"b0124",t)},expression:"orgForm.b0124"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"单位性质类别：",prop:"b0131"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入性质类别",disabled:e.edit},model:{value:e.orgForm.b0131,callback:function(t){e.$set(e.orgForm,"b0131",t)},expression:"orgForm.b0131"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"单位级别：",prop:"b0107"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入级别",disabled:e.edit},model:{value:e.orgForm.b0127,callback:function(t){e.$set(e.orgForm,"b0127",t)},expression:"orgForm.b0127"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm.b0134,callback:function(t){e.$set(e.orgForm,"b0134",t)},expression:"orgForm.b0134"}})],1)],1)],1)],1):e._e(),e._v(" "),"2"==e.b0194?o("div",{},[o("el-form",{ref:"orgForm2",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm2,size:"small"}},[o("el-form-item",{attrs:{label:"机构全称：",prop:""}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm2.b0101,callback:function(t){e.$set(e.orgForm2,"b0101",t)},expression:"orgForm2.b0101"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm2.b0104,callback:function(t){e.$set(e.orgForm2,"b0104",t)},expression:"orgForm2.b0104"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm2.b0114,callback:function(t){e.$set(e.orgForm2,"b0114",t)},expression:"orgForm2.b0114"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"单位级别：",prop:"b0107"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入级别",disabled:e.edit},model:{value:e.orgForm2.b0127,callback:function(t){e.$set(e.orgForm2,"b0127",t)},expression:"orgForm2.b0127"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm2.b0134,callback:function(t){e.$set(e.orgForm2,"b0134",t)},expression:"orgForm2.b0134"}})],1)],1)],1)],1):e._e(),e._v(" "),"3"==e.b0194?o("div",{},[o("el-form",{ref:"orgForm3",staticClass:"orgTable",attrs:{"label-width":"200px",model:e.orgForm3,size:"small"}},[o("el-form-item",{attrs:{label:"机构全称：",prop:""}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构全称",disabled:e.edit},model:{value:e.orgForm3.b0101,callback:function(t){e.$set(e.orgForm3,"b0101",t)},expression:"orgForm3.b0101"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构简称：",prop:"b0104"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构简称",disabled:e.edit},model:{value:e.orgForm3.b0104,callback:function(t){e.$set(e.orgForm3,"b0104",t)},expression:"orgForm3.b0104"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"机构编码：",prop:"b0114"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:"text",placeholder:"输入机构编码",disabled:e.edit},model:{value:e.orgForm3.b0114,callback:function(t){e.$set(e.orgForm3,"b0114",t)},expression:"orgForm3.b0114"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"职数描述：",prop:"b0134"}},[o("el-col",{attrs:{span:16}},[o("el-input",{staticClass:"inputmoom",attrs:{type:" textarea",autosize:"",placeholder:"职数描述",disabled:e.edit},model:{value:e.orgForm3.b0134,callback:function(t){e.$set(e.orgForm3,"b0134",t)},expression:"orgForm3.b0134"}})],1)],1)],1)],1):e._e()]),e._v(" "),e.addOrderVisible?o("org-merge",{ref:"orderAdd",attrs:{visible:e.addOrderVisible},on:{"update:visible":function(t){e.addOrderVisible=t}}}):e._e(),e._v(" "),e.addDemergeVisible?o("org-demerge",{ref:"orderAdd",attrs:{visible:e.addDemergeVisible},on:{"update:visible":function(t){e.addDemergeVisible=t}}}):e._e(),e._v(" "),o("div",[o("el-dialog",{staticStyle:{padding:"1px 20px"},attrs:{title:e.dialogSortTitle,visible:e.dialogSortVisible,"before-close":e.dialogSortClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogSortVisible=t}}},[o("org-sort",{ref:"contentTable",attrs:{orgId:e.b0121,labelNames:e.labelName},on:{dialogSortClose:e.dialogSortClose}})],1)],1)],1)},staticRenderFns:[]};var n=o("C7Lr")(i,l,!1,function(e){o("+Ww4")},"data-v-41902584",null);t.default=n.exports}});
//# sourceMappingURL=60.7118d8c8f380d47ac8b3.js.map