webpackJsonprmsh([42],{"7YTS":function(t,e){},BTgB:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("3cXf"),o=l.n(a),n=l("1g8X"),s={props:["checkedData"],data:function(){return{optionalColumnList:[],tableColumnList:[],dataList:[],sort:[{value:"0",label:"可排序"},{value:"1",label:"不可排序"}],align:[{value:"left",label:"居左"},{value:"center",label:"居中"},{value:"right",label:"居右"}],vertical:[{value:"top",label:"居上"},{value:"center",label:"居中"},{value:"bottom",label:"居下"}],checkArr:[],loading:!0}},created:function(){this.getColumnList(),this.getTableData()},methods:{getColumnList:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDataTableColumn),method:"post",data:this.$http.adornData({tabId:this.checkedData.tabId})}).then(function(e){var l=e.data;0===l.code?t.optionalColumnList=l.data:t.$message.error(l.msg)})},getTableData:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDataComponentsList),method:"post",data:this.$http.adornData({componentsId:this.checkedData.componentsId,listFlog:"0"})}).then(function(e){var l=e.data;0===l.code?(t.dataList=l.data,t.loading=!1,t.checkArr=[],t.dataList.forEach(function(e,l){t.checkArr.push(e.colId)})):t.$message.error(l.msg)})},menuChange:function(t){console.log(t);for(var e=!0,l=0;l<this.checkArr.length;l++)if(this.checkArr[l]===t.colId){e=!1;break}if(!e){var a={listTitle:t.colName,listAlign:"center",listVertical:"center",listIsorder:"1",listWidth:200,colName:t.colName,colCode:t.colCode,colId:t.colId};this.dataList.push(a)}if(e){var o=0;this.dataList.forEach(function(e,l){e.colId==t.colId&&(o=l)}),this.dataList.splice(o,1)}},saveClick:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.addDataComponentsList),method:"post",data:this.$http.adornData({data:o()(this.dataList),id:this.checkedData.componentsId,code:"0"})}).then(function(e){var l=e.data;0===l.code?(t.optionalColumnList=l.data,t.$message.success("保存成功")):t.$message.error(l.msg)})},columnDrop:function(){var t=this,e=document.querySelector(" .el-table__header-wrapper tr");this.sortable=n.a.create(e,{animation:180,delay:0,onEnd:function(e){var l=t.tableColumnList[e.oldIndex];t.tableColumnList.splice(e.oldIndex,1),t.tableColumnList.splice(e.newIndex,0,l)}})},getTableColWidth:function(){var t=localStorage.getItem("applyTableColWidths");if(t)for(var e=0;e<this.tableColumnList.length;e++)this.tableColumnList[e].width=JSON.parse(t)[e];console.log(JSON.parse(t)[e])},colChange:function(t,e,l,a){setTimeout(function(){console.log(t,e,l,a),console.log("拖动表头改变列宽");for(var n=[],s=document.getElementById("applyTable").getElementsByTagName("colgroup")[0].getElementsByTagName("col"),i=0;i<s.length;i++)n.push(s[i].width);console.log(o()(n)),localStorage.setItem("applyTableColWidths",o()(n))},100)}}},i={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-container",{staticClass:"box"},[l("el-main",[l("div",{staticClass:"hed-btn"},[l("el-dropdown",[l("el-button",{attrs:{type:"primary"}},[t._v("\n                    添加列"),l("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),l("el-dropdown-menu",{staticStyle:{width:"220px"},attrs:{slot:"dropdown"},slot:"dropdown"},[l("div",{staticClass:"dropdown-menu-box"},[l("el-checkbox-group",{staticStyle:{padding:"10px 0 0 20px"},model:{value:t.checkArr,callback:function(e){t.checkArr=e},expression:"checkArr"}},t._l(t.optionalColumnList,function(e){return l("el-col",{key:e.colCode},[l("el-checkbox",{key:e.colId,attrs:{label:e.colId},on:{change:function(l){return t.menuChange(e)}}},[t._v(t._s(e.colName))])],1)}),1)],1)])],1),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveClick()}}},[t._v("保存")])],1),t._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dragTable",staticClass:"fixedtableHeight",staticStyle:{width:"100%","margin-top":"1%"},attrs:{id:"applyTable",border:"",data:t.dataList,"header-cell-style":{border:"1px solid #ccc"},"tooltip-effect":"dark"},on:{"header-dragend":t.colChange}},[l("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{prop:"listTitle",label:"列名"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.row.listTitle,callback:function(l){t.$set(e.row,"listTitle",l)},expression:"scope.row.listTitle"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"listAlign",label:"对齐方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.row.listAlign,callback:function(l){t.$set(e.row,"listAlign",l)},expression:"scope.row.listAlign"}},t._l(t.align,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"listVertical",label:"对齐方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.row.listVertical,callback:function(l){t.$set(e.row,"listVertical",l)},expression:"scope.row.listVertical"}},t._l(t.vertical,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"listIsorder",label:"是否排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.row.listIsorder,callback:function(l){t.$set(e.row,"listIsorder",l)},expression:"scope.row.listIsorder"}},t._l(t.sort,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"listWidth",label:"列宽(px)"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.row.listWidth,callback:function(l){t.$set(e.row,"listWidth",l)},expression:"scope.row.listWidth"}})]}}])})],1)],1)],1)},staticRenderFns:[]};var r=l("C7Lr")(s,i,!1,function(t){l("7YTS")},"data-v-7b55da74",null);e.default=r.exports}});
//# sourceMappingURL=42.ce8a12098b41a0b8a095.js.map