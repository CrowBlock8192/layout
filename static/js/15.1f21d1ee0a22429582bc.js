webpackJsonprmsh([15],{"8exI":function(e,t){},TG8v:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"userUpdate",props:["isEdit","currentRow"],components:{organizationTreeSelect:r("hQpW").a},data:function(){return{rules:{userCode:[{required:!0,message:"请输入登录名",tigger:"change"},{min:3,max:20,message:"长度在 3 到 20个字符",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",tigger:"change"},{min:3,max:20,message:"长度在 3 到 20个字符",trigger:"blur"}]},userForm:{orgId:"",userId:"",userCode:"",userName:"",userStatus:"",userEmail:"",userPhone:"",userType:""},formLabelWidth:"110px",flag:!1}},created:function(){this.isEdit&&(this.userForm.orgId=this.currentRow.orgId,this.userForm.userId=this.currentRow.userId,this.userForm.userCode=this.currentRow.userCode,this.userForm.userName=this.currentRow.userName,this.userForm.userStatus=this.currentRow.userStatus,this.userForm.userType=this.currentRow.userType,this.userForm.userEmail=this.currentRow.userEmail,this.userForm.userPhone=this.currentRow.userPhone)},methods:{orgTreeSelectCall:function(e){this.userForm.orgId=e?e.id:""},saveUserManage:function(e){var t=this;this.$refs.userForm.validate(function(r){if(!r)return!1;var s=t,o="";o=s.currentRow.userId?s.API.updateSysPoweruser:s.API.insertSysPoweruser,s.$http({url:s.$http.adornUrl(o),method:"post",data:s.$http.adornData(e)}).then(function(e){0===e.data.code?(s.$message.success("操作成功"),t.$emit("updateCallback",!0)):s.$message.error("操作失败，请重新尝试")}).catch(function(e){})})},resetForm:function(e){var t=this;this.$nextTick(function(){void 0!==t.$refs[e]&&t.$refs[e].resetFields()})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-update"},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules,size:"small"}},[r("el-form-item",{attrs:{label:"机构选择","label-width":e.formLabelWidth,prop:" orgId"}},[r("organizationTreeSelect",{attrs:{defaultOptions:e.userForm.orgId},on:{OrgTreeSelectCall:e.orgTreeSelectCall}})],1),e._v(" "),r("el-form-item",{attrs:{label:"登录名称","label-width":e.formLabelWidth,prop:"userCode"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userForm.userCode,callback:function(t){e.$set(e.userForm,"userCode",t)},expression:"userForm.userCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名称","label-width":e.formLabelWidth,prop:"userName"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户类型",prop:"userType","label-width":e.formLabelWidth}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.userForm.userType,callback:function(t){e.$set(e.userForm,"userType",t)},expression:"userForm.userType"}},[r("el-option",{attrs:{label:"部门",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"单位",value:"1"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户状态","label-width":e.formLabelWidth,prop:"userStatus"}},[r("el-radio-group",{model:{value:e.userForm.userStatus,callback:function(t){e.$set(e.userForm,"userStatus",t)},expression:"userForm.userStatus"}},[r("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户邮箱","label-width":e.formLabelWidth,prop:"userEmail"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userForm.userEmail,callback:function(t){e.$set(e.userForm,"userEmail",t)},expression:"userForm.userEmail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户电话","label-width":e.formLabelWidth,prop:"userPhone"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userForm.userPhone,callback:function(t){e.$set(e.userForm,"userPhone",t)},expression:"userForm.userPhone"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveUserManage(e.userForm)}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.resetForm("userForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var a=r("C7Lr")(s,o,!1,function(e){r("8exI")},"data-v-ce24c1d8",null);t.default=a.exports},bC3Y:function(e,t){},hQpW:function(e,t,r){"use strict";var s=r("ZLEe"),o=r.n(s),a=(r("g7ZD"),{name:"OrganizationTreeSelect",props:["defaultOptions"],data:function(){return{selectedOptions:[],treeProps:{value:"id",label:"name",children:"children"},treeList:[],findObject:{}}},created:function(){this.getData()},computed:{},watch:{findObject:function(){this.$refs.refHandle&&(this.$refs.refHandle.dropDownVisible=!1)}},methods:{handleChange:function(e){if(0!==o()(this.selectedOptions).length){var t="";e&&e.length>0&&(t=e[e.length-1]),this.findObjById(this.treeList,t),this.$emit("OrgTreeSelectCall",this.findObject)}else this.$emit("OrgTreeSelectCall","")},findObjById:function(e,t){for(var r=0;r<e.length;r++){if(t==e[r].id)return this.findObject=e[r],void console.log(this.findObject);void 0!=e[r].children&&0!=e[r].children.length&&this.findObjById(e[r].children,t)}},getData:function(){var e=this,t=this;t.$http({url:t.$http.adornUrl(t.API.getOrganizationTree),method:"post",data:t.$http.adornData()}).then(function(r){var s=r.data;if("0"==s.code){t.treeList=t.commonFun.getTreeData(s.data);var o={};t.defaultOptions?(t.selectedOptions=t.defaultOptions,o=e.findObjById(t.treeList,t.defaultOptions)):""==t.defaultOptions?o={}:(t.selectedOptions.push(t.treeList[0].id),o=t.treeList[0]),e.$emit("OrgTreeSelectCall",o)}else t.$message({type:"error",message:"获取区域树形下拉框数据失败，请刷新重试！"})}).catch(function(e){console.log("获取区域树形下拉框数据="+e),t.$message({type:"error",message:"请求异常，请检查网络！"})})}},mounted:function(){}}),l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"organizationTreeSelect"},[r("el-cascader",{ref:"refHandle",attrs:{placeholder:"请选择机构","expand-trigger":"hover",options:e.treeList,"change-on-select":!0,props:e.treeProps,clearable:!0,"show-all-levels":!1,size:"small"},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)},staticRenderFns:[]};var i=r("C7Lr")(a,l,!1,function(e){r("bC3Y")},"data-v-f776adea",null);t.a=i.exports}});
//# sourceMappingURL=15.1f21d1ee0a22429582bc.js.map