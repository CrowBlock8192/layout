webpackJsonprmsh([69],{"4Nwx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("3cXf"),n=a.n(i),o=a("0xDb"),s={components:{cadreContDialog:a("mXPD").default},data:function(){return{tableData:[],cadreContDialogVisable:!1,treeData:[]}},created:function(){},methods:{getDataList:function(t){var e=this;this.treeData=t,this.$http({url:this.$http.adornUrl(this.API.queryPersonMingceConditionAll),method:"post",data:this.$http.adornData({mingceId:t.id})}).then(function(t){var a=t.data;a&&0===a.code?e.tableData=a.data:e.$message.error(a.msg)})},addListClick:function(){this.checkedData=this.treeData,this.title="干部类别添加",this.cadreContDialogVisable=!0,this.isEdit=!0},edikListClick:function(t,e){var a=this;this.checkedData=this.treeData,this.title="干部类别修改",this.cadreContDialogVisable=!0,this.isEdit=!1,this.$nextTick(function(){a.$refs.addContDialog.getDataList(e)})},deleteListClick:function(t,e){var a=this;this.$confirm("确定删除选中记录?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deletePersonMingceCondition),method:"post",data:a.$http.adornData({conditionId:e.id})}).then(function(t){var e=t.data;0===e.code?(a.getDataList(),a.$message.success("删除成功")):a.$message.error(e.msg)})}).catch(function(){})},selectionChangeHandle:function(t){this.tableDataSelections=t},moveDirection:function(t){if(0!==this.tableDataSelections.length){var e,a=this;a.tableDataSelections.sort(function(t,e){return a.tableData.indexOf(t)-a.tableData.indexOf(e)}),"down"==t&&a.tableDataSelections.reverse(),a.tableDataSelections.forEach(function(i){e=a.tableData.indexOf(i),"up"==t?a.moveUp(e):"down"==t&&a.moveDown(e)})}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveUp:function(t){0!=t&&(this.tableData=Object(o.d)(this.tableData,t,t-1,"up"))},moveDown:function(t){t!=this.tableData.length-1&&(this.tableData=Object(o.d)(this.tableData,t,t+1,"down"))},saveMetaSort:function(){var t=this,e=[];this.tableData.length<0||(this.tableData.forEach(function(t,a){e.push({id:t.conditionId,orderno:a+1})}),this.$http({url:this.$http.adornUrl(this.API.personMingceConditionSort),method:"post",data:this.$http.adornData({data:n()(e)})}).then(function(e){var a=e.data;a&&0===a.code?(t.getDataList(t.treeData),t.$message.success("操作成功")):t.$message.error(a.msg)}))},indexMethod:function(t){return t+1},addback:function(t){this.cadreContDialogVisable=!1,t&&this.getDataList(this.treeData)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-main",[a("div",{staticClass:"table-header-btn"},[a("div",{staticClass:"table-header-btn-l"}),t._v(" "),a("div",{staticClass:"table-header-btn-r"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addListClick()}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveMetaSort}},[t._v("保存排序")])],1)]),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{width:"50",fixed:"",type:"index",index:t.indexMethod,label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"conditionDesc",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-tag",{attrs:{size:"small"}},[t._v("是")]):a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.edikListClick(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return t.deleteListClick(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),t.cadreContDialogVisable?a("el-dialog",{attrs:{title:t.title,visible:t.cadreContDialogVisable,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(e){t.cadreContDialogVisable=e}}},[a("cadre-cont-dialog",{ref:"addContDialog",attrs:{checkedData:t.checkedData,isEdit:t.isEdit},on:{addback:t.addback}})],1):t._e()],1)},staticRenderFns:[]};var r=a("C7Lr")(s,l,!1,function(t){a("yyIk")},"data-v-2e9bf91c",null);e.default=r.exports},yyIk:function(t,e){}});
//# sourceMappingURL=69.d32e403f99cea0df8a4d.js.map