webpackJsonprmsh([7,37,38,71],{"+MJG":function(e,t){},"1Gb+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("iklx"),n=i("XS7+"),s=i("JnWa"),r={name:"perInfoTable",props:["siteContentViewHeight","searchConfigs"],components:{pagination:a.a,perInfoTableToolBar:n.default,perMainTable:s.default},data:function(){return{page:{pageIndex:this.API.constObj.newpageIndex,pageSize:this.API.constObj.newpageSize,total:0},selectIsShow:!0,selectedData:{},mainTableProps:{tabEventName:""}}},created:function(){console.log(this.API.constObj),console.log(this.page)},methods:{PageTurning:function(e){console.log(e),this.page.pageIndex=e.page_index,this.page.pageSize=e.page_size,this.$refs.perMainTable.getDataList()},updateSelect:function(e){this.selectedData=e},updatePage:function(e){console.log(e),this.page.total=e.total},pageChange:function(e){this.page.pageIndex=e,this.$refs.perMainTable.getDataList()},pageChangeSize:function(e){this.page.pageSize=e,this.$refs.perMainTable.getDataList()},getTableData:function(){this.$refs.perMainTable.getDataList()},tabEvent:function(e){this.mainTableProps.tabEventName=e,this.$refs.perMainTable.matchEvent(),console.log(e)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("per-main-table",{ref:"perMainTable",attrs:{searchConfigs:this.searchConfigs,siteContentViewHeight:this.siteContentViewHeight,page:this.page,selectedData:this.selectedData},on:{updatePage:this.updatePage,updateSelect:this.updateSelect}})],1)},staticRenderFns:[]};var l=i("C7Lr")(r,o,!1,function(e){i("ECjg")},"data-v-b85488e8",null);t.default=l.exports},ECjg:function(e,t){},NCXL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{visible:!1,dataForm:{nameListType:"",name:"",id:""},dataRule:{nameListType:[{required:!0,message:"请选择所属类型",trigger:"change"}],name:[{required:!0,message:"名单名称必填",trigger:"blur"}]},disabled:!1,title:"",operateType:""}},methods:{init:function(e,t){var i=this;this.title="add"==t?"新增名单":"修改名单",this.operateType=t,console.log(e),console.log(t),this.dataForm.id=e&&e.listId||0,this.visible=!0,this.$nextTick(function(){i.$refs.dataForm.resetFields(),"edit"==t?(i.dataForm.nameListType=e.listType,i.dataForm.name=e.listName,i.disabled=!0):i.disabled=!1})},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){e.dataForm.id=e.dataForm.id||void 0;var i={listType:e.dataForm.nameListType,listName:e.dataForm.name};"add"==e.operateType?i.id=e.dataForm.id:i.listId=e.dataForm.id,e.$http({url:e.$http.adornUrl(e.API["add"==e.operateType?"saveNameList":"updateNameList"]),method:"post",data:e.$http.adornData(i)}).then(function(t){var i=t.data;i?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshNameList")}}):e.$message.error(i.msg)})}})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.title,"close-on-click-modal":!1,visible:e.visible,width:"30%"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[i("el-form-item",{attrs:{label:"所属类型",prop:"nameListType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled},model:{value:e.dataForm.nameListType,callback:function(t){e.$set(e.dataForm,"nameListType",t)},expression:"dataForm.nameListType"}},[i("el-option",{attrs:{label:"共享名单",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"自定义名单",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"名单名称",prop:"name"}},[i("el-input",{model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var s=i("C7Lr")(a,n,!1,function(e){i("mMtK")},null,null);t.default=s.exports},X6WZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{orgTree:i("HMPb").a},data:function(){return{visible:!1,nameList:{},checked:!1,treeData:[],treeCheckBox:!0,defaultChecked:[]}},methods:{init:function(e){var t=this;this.visible=!0,this.nameList=e,this.$http({url:this.$http.adornUrl(this.API.selectBySharedPerson),method:"post",data:this.$http.adornData({areaId:this.$store.state.user.areaId,nameListId:e.id})}).then(function(e){var i=e.data;t.treeData=[],i&&0===i.code?(i.data.forEach(function(e){e.id=e.userId,e.name=e.userName,t.treeData.push(e)}),t.defaultChecked=t.getIsCheckCurrent(t.treeData)):t.$message.error(i.msg)})},getCurrentKey:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.saveNameListShare),method:"post",data:this.$http.adornData({nameListId:this.nameList.id,name:this.nameList.name,sharingPeople:this.$store.state.user.id,sharedPerson:this.$refs.tree.getCheckedKeys().join(",")})}).then(function(t){var i=t.data;i&&0===i.code?e.$message.success("操作成功"):e.$message.error(i.msg)})},getIsCheckCurrent:function(e){var t=[];if(e){return function e(i){return i.forEach(function(i){i.isCheck&&t.push(i.id),i.children&&i.children.length>0&&e(i.children)}),t}(e)}}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"grant-authorization",attrs:{title:"分享名单","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"grant-authorization-title"},[i("span"),e._v(" "),i("p",[e._v(e._s(e.nameList.name))])]),e._v(" "),i("div",{staticClass:"float-right"},[i("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("关联子节点")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getCurrentKey}},[e._v("保存")])],1),e._v(" "),i("div",{staticClass:"clearfix"}),e._v(" "),i("el-scrollbar",{staticStyle:{height:"400px"}},[i("org-tree",{ref:"tree",attrs:{treeData:e.treeData,checkbox:e.treeCheckBox,checkStrictly:!e.checked,defaultChecked:e.defaultChecked}})],1)],1)},staticRenderFns:[]};var s=i("C7Lr")(a,n,!1,function(e){i("bMPT")},"data-v-2d26a5f8",null);t.default=s.exports},bMPT:function(e,t){},lQnD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("3cXf"),n=i.n(a),s=i("HMPb"),r=i("NCXL"),o=i("X6WZ"),l=i("XS7+"),c=i("JnWa"),d=i("1Gb+"),h={props:["siteContentViewHeight","siteContentViewHeightFix"],components:{orgTree:s.a,addOrUpdateNamelist:r.default,shareNamelist:o.default,perInfoTable:d.default,perInfoTableToolBar:l.default,perMainTable:c.default},data:function(){return{stateValue:"",iconPlus:"el-icon-plus",stateData:[{itemCode:"",itemName:"全部"},{itemCode:"1",itemName:"现职人员"}],typeValue:"",typeData:[{itemCode:"",itemName:"全部"},{itemCode:"1",itemName:"现职人员"}],activeName:"first",treeData:[],multiAgencyQuery:!1,includeSubordinate:!1,filterText:"",nameListData:this.newNameListData(),nameListSelect:"",addOrUpdateNamelistVisible:!1,shareNamelistVisible:!1,searchConfigs:{multiAgencyQuery:!1,orgId:[],currentOrgItem:{},searchAreaHeight:58},conditionName:{name:""},conditionCheckList:["3","8","10"],orignconditionCheckList:[],checkList:["选中且禁用","复选框 A"],searchOptionsShow:!1,conditionCheckbox:[{name:"去重",itemname:"qc",child:[{name:"",id:"1"}],divider:!0,conditionCheckList:[]},{name:"名册状态",itemname:"a02.A0279",child:[{name:"上名册",id:"2"},{name:"不上名册",id:"3"}],divider:!0,conditionCheckList:[]},{name:"在职状态",itemname:"zzzt",child:[{name:"在任",id:"1"},{name:"已免",id:"0"}],divider:!1,conditionCheckList:[]},{name:"管理状态",itemname:"a01.A0163",child:[{name:"现职人员",id:"1"},{name:"离退人员",id:"8"},{name:"调出人员",id:"9"},{name:"已去世",id:"10"},{name:"其他人员",id:"11"},{name:"免职人员",id:"12"}],divider:!1,conditionCheckList:[]},{name:"管理类别",itemname:"a01.A0165",child:[{name:"中管",id:"01"},{name:"省管",id:"02"},{name:"市管",id:"03"},{name:"县管",id:"04"},{name:"其他",id:"09"}],divider:!1,conditionCheckList:[]}],orignconditionCheckbox:[],defaultProps:{children:"children",label:"listName"},page:{pageIndex:this.API.constObj.newpageIndex,pageSize:this.API.constObj.newpageSize,total:0},namesValue:"",operateType:""}},created:function(){console.log(this.siteContentViewHeight),this.getDataTree(),this.getNameList(),this.orignconditionCheckbox=JSON.parse(n()(this.conditionCheckbox)),console.log(this.orignconditionCheckbox)},methods:{searchName:function(e){console.log(e)},newNameListData:function(){return[{id:"1",listName:"共享名单",children:[]},{id:"2",listName:"自定义名单",children:[]},{id:"3",listName:"分享名单",children:[]}]},getDataTree:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.getOrganizationTree),method:"post",data:this.$http.adornData()}).then(function(t){var i=t.data;i&&0===i.code?e.treeData=i.data:(e.$message.error(i.msg),e.treeData=e.newNameListData())})},orgTreeClick:function(e){},orgTreeClick2:function(e){console.log(e),this.$refs.perMainTable.scroll(),this.searchConfigs.orgId=e,this.searchOptionsShow?this.searchConfigs.searchAreaHeight=204:this.searchConfigs.searchAreaHeight=58},orgTreeHandle:function(e){console.log(e),this.searchConfigs.nameListSelect=void 0,this.searchConfigs.currentOrgItem=e,this.$refs.perMainTable.updatDataList()},getNameList:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.getNameList),method:"post",data:this.$http.adornData()}).then(function(t){var i=t.data;i&&0===i.code?(e.nameListData[0].children=i.data[1],e.nameListData[1].children=i.data[2],e.nameListData[2].children=i.data[3]):(e.$message.error(i.msg),e.nameListData=[])})},nameListTreeClick:function(e){console.log(e),this.searchConfigs.nameListSelect=e,this.nameListSelect=e,this.$refs.perMainTable.updatDataList()},addOrUpdateNamelistHandle:function(e){var t=this;if("add"==e)this.addOrUpdateNamelistVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdateNamelist.init(t.nameListSelect,e)});else{if(""==this.nameListSelect)return void this.$message.warning("请选择名单");if(this.nameListSelect.id)return void this.$message.warning("名单类型不能修改");if("0"==this.nameListSelect.shareType)return void this.$message.warning("分享名单不能修改");this.addOrUpdateNamelistVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdateNamelist.init(t.nameListSelect,e)})}},deletNamelisteHandle:function(e){var t=this;console.log(this.nameListSelect.listId),""!=e?e.id?this.$message.warning("不能删除名单类型"):this.$confirm("确定要删除该信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl(t.API[void 0==t.nameListSelect.listType?"deleteShareNameList":"deleteNameList"]),method:"post",data:t.$http.adornData({id:t.nameListSelect.listId})}).then(function(e){var i=e.data;i&&0===i.code?(t.$message.success("操作成功"),t.getNameList()):t.$message.error(i.msg)})}).catch(function(){}):this.$message.warning("请选择名单")},shareNamelistHandle:function(e){var t=this;0!=e?"2"==e.listType||"2"==e.id?(this.shareNamelistVisible=!0,this.$nextTick(function(){t.$refs.shareNamelist.init(t.nameListSelect,t.operateType)})):this.$message.warning("只允许分享自定义名单"):this.$message.warning("请选择名单")},change:function(e){this.nameListSelect=""},multi:function(e){e||this.$refs.tree.resetChecked(),this.searchConfigs.multiAgencyQuery=e},searchHandle:function(){this.$refs.perMainTable.getDataList(),this.searchConfigs.multiAgencyQuery&&(this.searchConfigs.currentOrgItem={name:""})},searchBtn:function(){console.log(this.conditionCheckbox),this.$refs.perMainTable.getDataList(),this.searchConfigs.multiAgencyQuery&&(this.searchConfigs.currentOrgItem={name:""})},openSearchOptions:function(){this.searchOptionsShow=!this.searchOptionsShow,this.searchOptionsShow?(this.searchConfigs.searchAreaHeight=204,this.iconPlus="el-icon-minus"):(this.searchConfigs.searchAreaHeight=58,this.iconPlus="el-icon-plus")},resetCheckList:function(){this.conditionCheckbox=JSON.parse(n()(this.orignconditionCheckbox)),this.conditionName.name=""}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"permission-assignment"},[i("el-aside",{staticClass:"permission-assignment-aside",attrs:{width:"22%"}},[i("el-radio-group",{on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-radio-button",{attrs:{label:"first"}},[e._v("机构")]),e._v(" "),i("el-radio-button",{attrs:{label:"second"}},[e._v("名单")])],1),e._v(" "),"first"==e.activeName?i("div",[i("div",{style:{height:e.siteContentViewHeight-122+"px",overflow:"auto"}},[i("org-tree",{ref:"tree",attrs:{treeData:e.treeData,checkbox:e.multiAgencyQuery,filterText:e.filterText,checkStrictly:!e.includeSubordinate,multiAgencyQuery:e.searchConfigs.multiAgencyQuery},on:{"node-click":e.orgTreeClick,orgTreeClick2:e.orgTreeClick2,orgTreeHandle:e.orgTreeHandle}})],1),e._v(" "),i("div",[i("el-checkbox",{on:{change:e.multi},model:{value:e.multiAgencyQuery,callback:function(t){e.multiAgencyQuery=t},expression:"multiAgencyQuery"}},[e._v("多机构查询")]),e._v(" "),i("el-checkbox",{model:{value:e.includeSubordinate,callback:function(t){e.includeSubordinate=t},expression:"includeSubordinate"}},[e._v("包含下级")])],1),e._v(" "),i("el-input",{staticClass:"aside-search",attrs:{placeholder:"机构查询",size:"medium"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1):i("div",[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addOrUpdateNamelistHandle("add")}}},[e._v("新建")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deletNamelisteHandle(e.nameListSelect||0)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addOrUpdateNamelistHandle("edit")}}},[e._v("更名")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.shareNamelistHandle(e.nameListSelect||0)}}},[e._v("分享")])],1)],1),e._v(" "),i("org-tree",{ref:"tree",attrs:{treeData:e.nameListData,defaultProps:e.defaultProps},on:{"node-click":e.nameListTreeClick}})],1)],1),e._v(" "),i("el-main",{staticClass:"rightContent"},[i("div",{staticClass:"searchBox"},[i("div",{staticClass:"searchInput"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.conditionName}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{attrs:{placeholder:"姓名",size:"small",clearable:!0},model:{value:e.conditionName.name,callback:function(t){e.$set(e.conditionName,"name",t)},expression:"conditionName.name"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",plain:"",icon:e.iconPlus,size:"small"},on:{click:e.openSearchOptions}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resetCheckList}},[e._v("重置")])],1)],1)],1),e._v(" "),e.searchOptionsShow?i("div",{staticClass:"searchContent"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},e._l(e.conditionCheckbox,function(t,a){return i("el-form-item",{key:t.id,attrs:{label:t.name}},[i("el-checkbox-group",{model:{value:t.conditionCheckList,callback:function(i){e.$set(t,"conditionCheckList",i)},expression:"item.conditionCheckList"}},[e._l(t.child,function(a){return i("el-checkbox",{key:t.id,attrs:{label:a.id}},[e._v(e._s(a.name))])}),e._v(" "),t.divider?i("span",{staticClass:"el-divider"}):e._e()],2)],1)}),1)],1):e._e()]),e._v(" "),i("perMainTable",{ref:"perMainTable",staticClass:"main-table",attrs:{page:e.page,searchConfigs:e.searchConfigs,siteContentViewHeight:e.siteContentViewHeight,siteContentViewHeightFix:e.siteContentViewHeightFix,conditionCheckbox:e.conditionCheckbox,conditionName:e.conditionName}}),e._v(" "),e.addOrUpdateNamelistVisible?i("add-or-update-namelist",{ref:"addOrUpdateNamelist",on:{refreshNameList:e.getNameList}}):e._e(),e._v(" "),e.shareNamelistVisible?i("share-namelist",{ref:"shareNamelist"}):e._e()],1)],1)},staticRenderFns:[]};var u=i("C7Lr")(h,m,!1,function(e){i("+MJG")},"data-v-78389f88",null);t.default=u.exports},mMtK:function(e,t){}});
//# sourceMappingURL=7.cfda910c365e45f30c38.js.map