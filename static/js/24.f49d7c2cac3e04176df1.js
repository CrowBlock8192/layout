webpackJsonprmsh([24,78],{GOp8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={components:{orgTree:a("HMPb").a},data:function(){return{visible:!1,treeData:[],expandAll:!0,sysId:"",userId:"",dataList:[],dataListLoading:!1,multipleSelection:[]}},methods:{init:function(t){this.visible=!0,this.userId=t,this.getDataTree()},getDataTree:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getRoleMenuTree),method:"post",data:this.$http.adornData({areaId:this.$store.state.user.areaId})}).then(function(e){var a=e.data;if(a&&0===a.code){var i=[];a.data.length>0&&(a.data.forEach(function(t){i.push({name:t.sysName,id:t.sysId})}),t.treeData=[{name:"应用子系统",children:i}],t.orgTreeClick(t.treeData[0].children[0]))}else t.$message.error(a.msg),t.treeData=[]})},orgTreeClick:function(t){this.sysId=t.id,this.getDataList()},getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl(this.API.getRoleInfoByUserId),method:"post",data:this.$http.adornData({sysId:this.sysId,areaId:this.$store.state.user.areaId,userId:this.userId,searchCount:!1,relateType:"0",relateId:this.userId})}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.data.records,t.$nextTick(function(){t.dataList.forEach(function(e){null!=e.relateId&&""!=e.relateId&&t.$refs.table.toggleRowSelection(e,!0)})})):(t.$message.error(a.msg),t.dataList=[]),t.dataListLoading=!1})},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t.forEach(function(t){e.multipleSelection.push(t.roleId)})},saveHandle:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.saveRoleuser),method:"post",data:this.$http.adornData({areaId:this.$store.state.user.areaId,roleId:this.multipleSelection.join(","),relateId:this.userId,relateType:"0"})}).then(function(e){var a=e.data;a&&0===a.code?t.$message.success("操作成功"):t.$message.error(a.msg)})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"grant-authorization",attrs:{title:"授权","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-container",[a("el-aside",{attrs:{width:"30%"}},[a("el-scrollbar",{staticStyle:{height:"400px"}},[a("org-tree",{ref:"tree",attrs:{treeData:t.treeData,expandAll:t.expandAll},on:{"node-click":t.orgTreeClick}})],1)],1),t._v(" "),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:"400px"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleCode",width:"100",label:"角色代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleType",width:"100",label:"角色类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===parseInt(e.row.roleType)?a("div",[t._v("系统管理员")]):t._e(),t._v(" "),2===parseInt(e.row.roleType)?a("div",[t._v("安全保密员")]):t._e(),t._v(" "),3===parseInt(e.row.roleType)?a("div",[t._v("安全审计员")]):t._e(),t._v(" "),4===parseInt(e.row.roleType)?a("div",[t._v("业务管理员")]):t._e()]}}])})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveHandle}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(i,r,!1,function(t){a("zjoF")},"data-v-0e95a9f0",null);e.default=n.exports},SAML:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("HMPb"),r=a("GOp8"),n=a("NxFF"),s={props:["siteContentViewHeight"],components:{orgTree:i.a,GrantAuthorization:r.default,pagination:n.a},data:function(){return{treeData:[],dataList:[],dataListLoading:!1,grantAuthorizationVisible:!1,page:{pageIndex:this.API.constObj.pageIndex,pageSize:this.API.constObj.pageSize,total:0}}},created:function(){this.getDataTree()},methods:{getDataTree:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getOrganizationTree),method:"post",data:this.$http.adornData()}).then(function(e){var a=e.data;a&&0===a.code?a.data.length>0&&(t.treeData=a.data,t.orgTreeClick(t.treeData[0])):(t.$message.error(a.msg),t.treeData=[])})},orgTreeClick:function(t){this.getDataList(t.id)},getDataList:function(t){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl(this.API.getSysPoweruser),method:"post",data:this.$http.adornData({orgId:t,current:this.page.pageIndex,pageSize:this.page.pageSize})}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.data.records,e.page.total=a.data.total):(e.$message.error(a.msg),e.dataList=[],e.page.total=0),e.dataListLoading=!1})},authorizationHandle:function(t){var e=this;this.grantAuthorizationVisible=!0,this.$nextTick(function(){e.$refs.grantAuthorization.init(t)})},PageTurning:function(t){this.page.pageIndex=t.page_index,this.page.pageSize=t.page_size,this.getDataList()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"permission-assignment"},[a("el-aside",{attrs:{width:"22%"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("org-tree",{ref:"tree",attrs:{treeData:t.treeData},on:{"node-click":t.orgTreeClick}})],1)],1),t._v(" "),a("el-main",{staticStyle:{"padding-top":"0"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:t.siteContentViewHeight-50+"px"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userCode",width:"300",label:"登录名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return t.authorizationHandle(e.row.userId)}}},[t._v("授权")])]}}])})],1),t._v(" "),a("pagination",{attrs:{total:t.page.total,pageSize:t.page.pageSize},on:{PageTurning:t.PageTurning}}),t._v(" "),t.grantAuthorizationVisible?a("grant-authorization",{ref:"grantAuthorization"}):t._e()],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(s,o,!1,function(t){a("zzOQ")},"data-v-1593f140",null);e.default=l.exports},zjoF:function(t,e){},zzOQ:function(t,e){}});
//# sourceMappingURL=24.f49d7c2cac3e04176df1.js.map