webpackJsonprmsh([76],{"0yss":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3cXf"),l=a.n(o),n=a("0xDb"),i={components:{sortSetDialog:a("AUiR").default},data:function(){return{tableData:[],sortSetDialogVisable:!1,orderType:[{value:"1",label:"升序"},{value:"2",label:"降序"}],treeData:[]}},created:function(){},methods:{getDataList:function(t){var e=this;this.treeData=t,this.$http({url:this.$http.adornUrl(this.API.getMingceConditionsOrder),method:"post",data:this.$http.adornData({mingceId:t.id})}).then(function(t){var a=t.data;a&&0===a.code?e.tableData=a.data:e.$message.error(a.msg)})},addListClick:function(){this.checkedData=this.treeData,this.sortSetDialogVisable=!0},closeDialog:function(){this.getDataList(this.checkedData)},selectionChangeHandle:function(t){this.tableDataSelections=t},moveDirection:function(t){if(0!==this.tableDataSelections.length){var e,a=this;a.tableDataSelections.sort(function(t,e){return a.tableData.indexOf(t)-a.tableData.indexOf(e)}),"down"==t&&a.tableDataSelections.reverse(),a.tableDataSelections.forEach(function(o){e=a.tableData.indexOf(o),"up"==t?a.moveUp(e):"down"==t&&a.moveDown(e)})}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveUp:function(t){0!=t&&(this.tableData=Object(n.d)(this.tableData,t,t-1,"up"))},moveDown:function(t){t!=this.tableData.length-1&&(this.tableData=Object(n.d)(this.tableData,t,t+1,"down"))},saveMetaSort:function(){var t=this,e=[];this.tableData.length<0||(this.tableData.forEach(function(t,a){e.push({orderId:t.orderId,orderno:a+1,mingceId:t.mingceId,orderType:t.orderType,colCode:t.colCode,tabCode:t.tabCode})}),this.$http({url:this.$http.adornUrl(this.API.updateMingceOrder),method:"post",data:this.$http.adornData({data:l()(e)})}).then(function(e){var a=e.data;a&&0===a.code?t.$message.success("操作成功"):t.$message.error(a.msg)}))}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-main",[a("div",{staticClass:"table-header-btn"},[a("div",{staticClass:"table-header-btn-l"}),t._v(" "),a("div",{staticClass:"table-header-btn-r"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveMetaSort}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addListClick()}}},[t._v("选择列")])],1)]),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"colCode",label:"列名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderType",label:"排序方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.row.orderType,callback:function(a){t.$set(e.row,"orderType",a)},expression:"scope.row.orderType"}},t._l(t.orderType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}),1)]}}])})],1)],1),t._v(" "),t.sortSetDialogVisable?a("el-dialog",{attrs:{title:"选择列设置",visible:t.sortSetDialogVisable,width:"50%"},on:{"update:visible":function(e){t.sortSetDialogVisable=e},close:t.closeDialog}},[a("sortSetDialog",{attrs:{checkedData:t.checkedData}})],1):t._e()],1)},staticRenderFns:[]};var s=a("C7Lr")(i,r,!1,function(t){a("ca5Q")},"data-v-17cba4c6",null);e.default=s.exports},ca5Q:function(t,e){}});
//# sourceMappingURL=76.e14347ada2979b3c514e.js.map