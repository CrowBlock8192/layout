{"version":3,"sources":["webpack:///src/views/modules/dictionary/dictionarySort.vue","webpack:///./src/views/modules/dictionary/dictionarySort.vue?64d1","webpack:///./src/views/modules/dictionary/dictionarySort.vue"],"names":["dictionarySort","name","components","props","itemPId","type","String","dictcode","data","tableData","computed","watch","methods","indexMethod","index","selectDictionarySort","_this","this","postData","itemPid","dictCode","$http","url","adornUrl","API","getDictItemListByCode","method","adornData","then","_ref","code","$message","error","msg","catch","selectionChangeHandle","val","tableDataSelections","moveDirection","direction","that","sort","prev","next","indexOf","reverse","forEach","item","moveUp","moveDown","Object","utils","length","saveSort","_this2","sortArr","push","itemId","orderno","dictItemSort","stringify_default","_ref2","$emit","success","created","mounted","beforeCreate","beforeMount","beforeUpdate","updated","beforeDestroy","destroyed","activated","dictionary_dictionarySort","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","on","click","$event","_v","ref","staticStyle","width","tooltip-effect","selection-change","align","fixed","label","prop","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/51.06093b3847dccc567a28.js","sourcesContent":["<template>\r\n  <!-- 下级机构排序 -->\r\n  <div class=\"sortBody\">\r\n    <div class=\"saveBtn\">\r\n      <el-button type=\"primary\" size=\"small\" @click=\"moveDirection('up')\">上移</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"moveDirection('down')\">下移</el-button>\r\n      <el-button size=\"mini\" type=\"primary\" @click=\"saveSort\">保存</el-button>\r\n    </div>\r\n    <div class=\"sortFrom\">\r\n      <el-table\r\n        ref=\"multipleTable\"\r\n        :data=\"tableData\"\r\n        @selection-change=\"selectionChangeHandle\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n        <el-table-column\r\n          width=\"50px\"\r\n          fixed\r\n          type=\"index\"\r\n          :index=\"indexMethod\"\r\n          label=\"序号\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column prop=\"itemName\" label=\"名称\" align=\"center\"></el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { swapItems } from \"@/utils\";\r\nexport default {\r\n  name: \"dictionarySort\",\r\n  //import引入的组件需要注入到对象中才能使用\r\n  components: {},\r\n  props: {\r\n    itemPId: {\r\n      type: String\r\n    },\r\n    dictcode: {\r\n      type: String\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n    };\r\n  },\r\n\r\n  //监听属性 类似于data概念\r\n  computed: {},\r\n\r\n  //监控data中的数据变化\r\n  watch: {\r\n    //obj:{\r\n    //    handler:function(val,oldval){\r\n    //\r\n    //    },\r\n    //    deep:true,//深度监听\r\n    //}\r\n  },\r\n\r\n  //方法集合\r\n  methods: {\r\n    indexMethod(index) {\r\n      return index + 1;\r\n    },\r\n    //获取同级机构\r\n    selectDictionarySort() {\r\n      let _this = this;\r\n      let postData = {};\r\n      postData.itemPid = _this.itemPId;\r\n      postData.dictCode = _this.dictcode;\r\n      this.$http({\r\n        url: this.$http.adornUrl(this.API.getDictItemListByCode),\r\n        method: \"post\",\r\n        data: this.$http.adornData(postData)\r\n      })\r\n        .then(({ data }) => {\r\n          if (data.code === 0) {\r\n            _this.tableData = data.data.data;\r\n          } else {\r\n            _this.$message.error(data.data.msg);\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          this.$message.error(error);\r\n        });\r\n    },\r\n    selectionChangeHandle(val) {\r\n      //多选\r\n      this.tableDataSelections = val;\r\n    },\r\n    moveDirection(direction) {\r\n      //移动\r\n      var that = this,\r\n        index;\r\n      that.tableDataSelections.sort((prev, next) => {\r\n        return that.tableData.indexOf(prev) - that.tableData.indexOf(next);\r\n      });\r\n      if (direction == \"down\") that.tableDataSelections.reverse();\r\n      that.tableDataSelections.forEach(item => {\r\n        index = that.tableData.indexOf(item); //得到右侧选中值的标识坐标\r\n        if (direction == \"up\") that.moveUp(index);\r\n        else if (direction == \"down\") that.moveDown(index);\r\n      });\r\n    },\r\n    moveUp(index) {\r\n      //上移\r\n      if (index == 0) return;\r\n      this.tableData = swapItems(this.tableData, index, index - 1, \"up\");\r\n    },\r\n    moveDown(index) {\r\n      //下移\r\n      if (index == this.tableData.length - 1) return;\r\n      this.tableData = swapItems(this.tableData, index, index + 1, \"down\");\r\n    },\r\n    saveSort() {\r\n      //保存排序\r\n      var sortArr = [];\r\n      if (this.tableData.length < 0) return;\r\n      this.tableData.forEach((item, index) => {\r\n        sortArr.push({\r\n          itemId: item.itemId,\r\n          orderno: index + 1\r\n        });\r\n      });\r\n      this.$http({\r\n        url: this.$http.adornUrl(this.API.dictItemSort),\r\n        method: \"post\",\r\n        data: this.$http.adornData({\r\n          data: JSON.stringify(sortArr)\r\n        })\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.$emit('dialogSortClose');\r\n          this.$emit('selectItemCode');\r\n          this.$message.success(\"操作成功\");\r\n        } else {\r\n          this.$message.error(data.msg);\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  //生命周期 - 创建完成（可以访问当前this实例）\r\n  created() {},\r\n\r\n  //生命周期 - 挂载完成（可以访问DOM元素）\r\n  mounted() {},\r\n\r\n  beforeCreate() {}, //生命周期 - 创建之前\r\n\r\n  beforeMount() {}, //生命周期 - 挂载之前\r\n\r\n  beforeUpdate() {}, //生命周期 - 更新之前\r\n\r\n  updated() {}, //生命周期 - 更新之后\r\n\r\n  beforeDestroy() {}, //生命周期 - 销毁之前\r\n\r\n  destroyed() {}, //生命周期 - 销毁完成\r\n\r\n  activated() {} //如果页面有keep-alive缓存功能，这个函数会触发\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sortFrom {\r\n  margin-top: 6px;\r\n}\r\n.sortFrom >>> .el-table td {\r\n  border-bottom: none !important;\r\n  padding: 6px;\r\n}\r\n\r\n.sortFrom >>> .el-table th {\r\n  margin-top: 5px;\r\n  padding: 6px 0;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/modules/dictionary/dictionarySort.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sortBody\"},[_c('div',{staticClass:\"saveBtn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.moveDirection('up')}}},[_vm._v(\"上移\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.moveDirection('down')}}},[_vm._v(\"下移\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.saveSort}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"sortFrom\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.selectionChangeHandle}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"50px\",\"fixed\":\"\",\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"itemName\",\"label\":\"名称\",\"align\":\"center\"}})],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5baf90ea\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/dictionary/dictionarySort.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5baf90ea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./dictionarySort.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dictionarySort.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dictionarySort.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5baf90ea\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./dictionarySort.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5baf90ea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/dictionary/dictionarySort.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}