webpackJsonprmsh([28,88],{"HuH/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),r=a.n(n),o=a("Z2Cd"),i=a("0xDb"),s={props:["siteContentViewHeight"],data:function(){return{keyWordSearch:"",dataList:[],dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1}},components:{AddOrUpdate:o.default},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl(this.API.queryDataFunction),method:"post",data:this.$http.adornData({funName:this.keyWordSearch})}).then(function(e){var a=e.data;a&&0===a.code?t.dataList=a.data:(t.$message.error(a.msg),t.dataList=[]),t.dataListLoading=!1})},addOrUpdateHandle:function(t){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){e.$refs.addOrUpdate.init(t)})},selectionChangeHandle:function(t){this.dataListSelections=t},moveDirection:function(t){var e,a=this;a.dataListSelections.sort(function(t,e){return a.dataList.indexOf(t)-a.dataList.indexOf(e)}),"down"==t&&a.dataListSelections.reverse(),a.dataListSelections.forEach(function(n){e=a.dataList.indexOf(n),"up"==t?a.moveUp(e):"down"==t&&a.moveDown(e)})},moveUp:function(t){0!=t&&(this.dataList=Object(i.d)(this.dataList,t,t-1,"up"))},moveDown:function(t){t!=this.dataList.length-1&&(this.dataList=Object(i.d)(this.dataList,t,t+1,"down"))},sortHanlde:function(){var t=this,e=[];this.dataList.length<0||(this.dataList.forEach(function(t,a){e.push({funId:t.funId,orderno:a+1})}),this.$http({url:this.$http.adornUrl(this.API.dataFunctionSort),method:"post",data:this.$http.adornData({data:r()(e)})}).then(function(e){var a=e.data;a&&0===a.code?t.$message.success("操作成功"):t.$message.error(a.msg)}))},deleteHandle:function(t,e){var a=this;this.$confirm("确定要删除该信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deleteDataFunction),method:"post",data:a.$http.adornData({funId:e})}).then(function(e){var n=e.data;n&&0===n.code?(a.dataList.splice(t,1),a.$message.success("操作成功")):a.$message.error(n.msg)})}).catch(function(){})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{size:"small",placeholder:"请输入函数名称",clearable:""},model:{value:t.keyWordSearch,callback:function(e){t.keyWordSearch=e},expression:"keyWordSearch"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getDataList()}}},[t._v("检索")])],1),t._v(" "),a("el-form-item",{staticClass:"float-right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addOrUpdateHandle()}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortHanlde}},[t._v("保存排序")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:t.siteContentViewHeight-57+"px"},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"funCode",width:"200",label:"函数名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"funName",label:"函数名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"funType",width:"200",label:"函数类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===parseInt(e.row.funType)?a("div",[t._v("通用函数")]):t._e(),t._v(" "),1===parseInt(e.row.funType)?a("div",[t._v("计算列函数")]):t._e(),t._v(" "),2===parseInt(e.row.funType)?a("div",[t._v("校验函数")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"funStatus",width:"120",label:"函数状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===parseInt(e.row.funStatus)?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("停用")]):a("el-tag",{attrs:{size:"small"}},[t._v("启用")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.addOrUpdateHandle(e.row.funId)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return t.deleteHandle(e.$index,e.row.funId)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):t._e()],1)},staticRenderFns:[]};var l=a("C7Lr")(s,d,!1,function(t){a("jLQ6")},"data-v-81fbfd98",null);e.default=l.exports},Z2Cd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{visible:!1,sysId:"",dataForm:{funId:0,funCode:"",funName:"",funType:0,funStatus:1,funSql:"",funDesc:""},dataRule:{funCode:[{required:!0,message:"函数名必填",trigger:"blur"}],funName:[{required:!0,message:"函数名称必填",trigger:"blur"}]},funType:[{id:0,text:"通用函数"},{id:1,text:"计算列函数"},{id:2,text:"校验函数"}]}},methods:{init:function(t){var e=this;this.dataForm.funId=t||0,this.visible=!0,this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.dataForm.funId&&e.$http({url:e.$http.adornUrl(e.API.queryDataFunctionById),method:"post",params:e.$http.adornParams({funId:t})}).then(function(t){var a=t.data;a&&0===a.code&&(e.dataForm.funId=a.data.funId,e.dataForm.funCode=a.data.funCode,e.dataForm.funName=a.data.funName,e.dataForm.funType=a.data.funType?parseInt(a.data.funType):0,e.dataForm.funStatus=a.data.funStatus?parseInt(a.data.funStatus):1,e.dataForm.funSql=a.data.funSql,e.dataForm.funDesc=a.data.funDesc)})})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.dataForm.funId=t.dataForm.funId||void 0,t.$http({url:t.$http.adornUrl(t.API[t.dataForm.funId?"updateDataFunction":"addDataFunction"]),method:"post",data:t.$http.adornData(t.dataForm)}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(a.msg)}))})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dataForm.id?"函数修改":"函数新增","close-on-click-modal":!1,top:"80px",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"函数名",prop:"funCode"}},[a("el-input",{model:{value:t.dataForm.funCode,callback:function(e){t.$set(t.dataForm,"funCode",e)},expression:"dataForm.funCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"函数名称",prop:"funName"}},[a("el-input",{model:{value:t.dataForm.funName,callback:function(e){t.$set(t.dataForm,"funName",e)},expression:"dataForm.funName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"函数类型",prop:"funType"}},[a("el-select",{model:{value:t.dataForm.funType,callback:function(e){t.$set(t.dataForm,"funType",e)},expression:"dataForm.funType"}},t._l(t.funType,function(t){return a("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"函数状态",prop:"funStatus"}},[a("el-radio-group",{model:{value:t.dataForm.funStatus,callback:function(e){t.$set(t.dataForm,"funStatus",e)},expression:"dataForm.funStatus"}},[a("el-radio",{attrs:{label:0}},[t._v("停用")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("启用")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"函数脚本",prop:"funSql"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.dataForm.funSql,callback:function(e){t.$set(t.dataForm,"funSql",e)},expression:"dataForm.funSql"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"函数说明",prop:"funDesc"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.dataForm.funDesc,callback:function(e){t.$set(t.dataForm,"funDesc",e)},expression:"dataForm.funDesc"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},o=a("C7Lr")(n,r,!1,null,null,null);e.default=o.exports},jLQ6:function(t,e){}});
//# sourceMappingURL=28.68c9a4770266e525470f.js.map