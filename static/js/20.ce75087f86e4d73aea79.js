webpackJsonprmsh([20,68],{"13uD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("3cXf"),r=a.n(o),n=a("0xDb"),i={props:["checkedData"],components:{metadataTree:a("HMPb").a},data:function(){return{loading:!0,expressionPrefix:this.API.constObj.expressionPrefix,expressionSuffix:this.API.constObj.expressionSuffix,operatorShow:this.API.constObj.operatorShow,connectorShow:[{value:"1",label:"并且"},{value:"2",label:"或者"}],valueShow:[{value:"1",label:"是"},{value:"2",label:"否"}],treeData:[],tableData:[],currentRow:"",dataForm:{menuStatus:"1",sqlConditionsCh:""},citiaoId:"",operateType:"",rules:{menuStatus:[{required:!0,message:"请输入区域状态",trigger:"blur"}]}}},created:function(){this.getDataTree()},methods:{initData:function(e){this.operateType=e},getDataTree:function(){var e=this;this.$http({url:this.$http.adornUrl(this.API.getEntryInfoTreeInformation),method:"post",data:this.$http.adornData({})}).then(function(t){var a=t.data;a&&0===a.code?(e.treeData=a.data,e.loading=!1):(e.$message.error(a.msg),e.treeData=[])})},orgTreeClick:function(e){if(this.currentRow=e,this.isParent=e.isParent,!1===this.isParent){var t={name:e.name,connectorShow:"并且",operatorShow:"等于"};this.tableData.push(t)}},getDataList:function(e){var t=this;this.citiaoId=e.id,this.$http({url:this.$http.adornUrl(this.API.queryPersonLeadercondition),method:"post",data:this.$http.adornData({id:e.id})}).then(function(e){var a=e.data;a&&0===a.code?(t.tableData=JSON.parse(a.data.leaderScript),t.dataForm.menuStatus=a.data.leaderStatus,t.dataForm.sqlConditionsCh=a.data.leaderDesc):t.$message.error(a.msg)})},handleDelete:function(e,t){this.tableData.splice(e,1)},selectionChangeHandle:function(e){this.tableDataSelections=e},moveDirection:function(e){if(0!==this.tableDataSelections.length){var t,a=this;a.tableDataSelections.sort(function(e,t){return a.tableData.indexOf(e)-a.tableData.indexOf(t)}),"down"==e&&a.tableDataSelections.reverse(),a.tableDataSelections.forEach(function(o){t=a.tableData.indexOf(o),"up"==e?a.moveUp(t):"down"==e&&a.moveDown(t)})}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveUp:function(e){0!=e&&(this.tableData=Object(n.d)(this.tableData,e,e-1,"up"))},moveDown:function(e){e!=this.tableData.length-1&&(this.tableData=Object(n.d)(this.tableData,e,e+1,"down"))},describeClick:function(){var e=[];this.tableData.length<0||(this.tableData.forEach(function(t,a){e.push(t.expressionPrefix,t.name,t.operatorShow,t.valueShow,t.expressionSuffix,t.connectorShow)}),this.dataForm.sqlConditionsCh=e.toString().replace(/,/g," "))},saveClick:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a="";a="add"==e.operateType?e.API.savePersonLeadercondition:e.API.updatePersonLeadercondition;var o=[];e.tableData.length<0||(e.tableData.forEach(function(e,t){o.push({expressionPrefix:e.expressionPrefix,name:e.name,operatorShow:e.operatorShow,valueShow:e.valueShow,expressionSuffix:e.expressionSuffix,connectorShow:e.connectorShow})}),e.$http({url:e.$http.adornUrl(a),method:"post",data:e.$http.adornData({leaderType:e.checkedData.id,id:e.citiaoId,leaderScript:r()(o),leaderStatus:e.dataForm.menuStatus,leaderDesc:e.dataForm.sqlConditionsCh})}).then(function(t){var a=t.data;0==a.code?(e.$message({message:"成功",type:"success"}),e.$emit("addback",!0)):e.$message.error(a.msg)}))})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{attrs:{width:"20%"}},[a("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"100%"}},[a("metadataTree",{ref:"moduleTree",staticStyle:{"margin-top":"10px"},attrs:{treeData:e.treeData},on:{"node-click":e.orgTreeClick}})],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"top-btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.moveDirection("up")}}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.moveDirection("down")}}},[e._v("下移")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expressionPrefix",label:"组合"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.row.expressionPrefix,callback:function(a){e.$set(t.row,"expressionPrefix",a)},expression:"scope.row.expressionPrefix"}},e._l(e.expressionPrefix,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorShow",label:"操作符"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.row.operatorShow,callback:function(a){e.$set(t.row,"operatorShow",a)},expression:"scope.row.operatorShow"}},e._l(e.operatorShow,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"valueShow",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.row.valueShow,callback:function(a){e.$set(t.row,"valueShow",a)},expression:"scope.row.valueShow"}},e._l(e.valueShow,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expressionSuffix",label:"组合"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.row.expressionSuffix,callback:function(a){e.$set(t.row,"expressionSuffix",a)},expression:"scope.row.expressionSuffix"}},e._l(e.expressionSuffix,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"connectorShow",label:"逻辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.row.connectorShow,callback:function(a){e.$set(t.row,"connectorShow",a)},expression:"scope.row.connectorShow"}},e._l(e.connectorShow,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",[a("el-form",{ref:"addForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域状态",prop:"menuStatus"}},[a("el-radio-group",{model:{value:e.dataForm.menuStatus,callback:function(t){e.$set(e.dataForm,"menuStatus",t)},expression:"dataForm.menuStatus"}},[a("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("停用")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"名册说明",prop:"sqlConditionsCh"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.dataForm.sqlConditionsCh,callback:function(t){e.$set(e.dataForm,"sqlConditionsCh",t)},expression:"dataForm.sqlConditionsCh"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveClick()}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.describeClick()}}},[e._v("生成中文描述")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(i,l,!1,function(e){a("vuSy")},"data-v-33c890d6",null);t.default=s.exports},IOcC:function(e,t){},eupT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("13uD"),r={props:["siteContentViewHeight"],components:{orgTree:a("HMPb").a,AddOrUpdate:o.default},data:function(){return{treeData:[],dataList:[],dataListLoading:!1,addOrUpdateVisible:!1,addListVisable:!1,currentRow:"",defaultProps:{children:"children",label:"itemName"},total:0,operateType:"add"}},created:function(){this.getDicCodeItem()},methods:{getDicCodeItem:function(){var e=this,t={dictCode:"LeaderType"};this.$http({url:this.$http.adornUrl(this.API.getDictItemByCode),method:"post",data:this.$http.adornData(t)}).then(function(t){var a=t.data;a&&0===a.code?e.treeData=a.data:e.$message.error(a.msg)})},getDataList:function(e){var t=this;this.dataListLoading=!0;var a={leaderType:e};this.$http({url:this.$http.adornUrl(this.API.queryPersonLeaderconditionAll),method:"post",data:this.$http.adornData(a)}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.data,t.total=a.total,t.dataListLoading=!1):t.$message.error(a.msg)})},orgTreeClick:function(e){this.getDataList(e.id),this.currentRow=e},addOrUpdateHandle:function(e){var t=this;e?(this.checkedData=this.currentRow,this.addListVisable=!0,this.isEdit=!0,this.title="信息项编辑",this.operateType="edit",this.$nextTick(function(){t.$refs.addOrUpdate.getDataTree(),t.$refs.addOrUpdate.initData(t.operateType),t.$refs.addOrUpdate.getDataList(e)})):""==this.currentRow?this.$message({message:"请选择干部类别",type:"warning"}):(this.checkedData=this.currentRow,this.addListVisable=!0,this.isEdit=!0,this.title="信息项添加",this.operateType="add",this.$nextTick(function(){t.$refs.addOrUpdate.getDataTree(),t.$refs.addOrUpdate.initData(t.operateType)}))},addback:function(e){this.addListVisable=!1,e&&this.getDataList(this.currentRow.id)},deleteHandle:function(e,t){var a=this;this.$confirm("确定要删除该信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deletePersonLeadercondition),method:"post",data:a.$http.adornData({id:t})}).then(function(t){var o=t.data;o&&0===o.code?(a.dataList.splice(e,1),a.$message.success("操作成功")):a.$message.error(o.msg)})}).catch(function(){})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"permission-assignment"},[a("el-aside",{staticClass:"permission-assignment-aside",attrs:{width:"20%"}},[a("el-scrollbar",{style:{height:e.siteContentViewHeight-10+"px"}},[a("org-tree",{ref:"tree",attrs:{treeData:e.treeData,expandAll:!0,defaultProps:e.defaultProps},on:{"node-click":e.orgTreeClick}})],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"permission-assignment-title"},[a("span"),e._v(" "),a("p",[e._v(e._s(e.total)+"条")])]),e._v(" "),a("el-form",{staticClass:"float-right",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,"element-loading-background":"rgba(0, 0, 0, 0)",height:e.siteContentViewHeight-56+"px"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaderDesc",label:"条件描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaderStatus",width:"200",label:"是否使用"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.leaderStatus?a("span",{staticStyle:{color:"green"}},[e._v("启用")]):a("span",{staticStyle:{color:"red"}},[e._v("停用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.addOrUpdateHandle(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return e.deleteHandle(t.$index,t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.addListVisable?a("el-dialog",{attrs:{title:e.title,visible:e.addListVisable,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addListVisable=t}}},[a("add-or-update",{ref:"addOrUpdate",attrs:{checkedData:e.checkedData},on:{addback:e.addback}})],1):e._e()],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(r,n,!1,function(e){a("IOcC")},"data-v-eebff76c",null);t.default=i.exports},vuSy:function(e,t){}});
//# sourceMappingURL=20.ce75087f86e4d73aea79.js.map