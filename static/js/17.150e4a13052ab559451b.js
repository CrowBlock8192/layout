webpackJsonprmsh([17,45],{"0rIL":function(t,e){},"1Svv":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"add-area-dialog",props:["checkedData","isEdit"],data:function(){return{rules:{menuCode:[{required:!0,message:"请输入菜单代码",trigger:"change"}],menuName:[{required:!0,message:"请输入菜单名称",trigger:"change"}],menuPath:[{required:!0,message:"请输入菜单路径",trigger:"change"}],menuIco:[{required:!0,message:"请输入菜单图标",trigger:"change"}]},dataForm:{menuCode:"",menuName:"",menuPath:"",menuIco:"",menuStatus:0,sysId:"",menuPid:""}}},created:function(){this.setFormData()},methods:{setFormData:function(){!1===this.isEdit?(this.dataForm.menuId=this.checkedData.menuId,this.dataForm.menuCode=this.checkedData.menuCode,this.dataForm.menuName=this.checkedData.menuName,this.dataForm.menuPath=this.checkedData.menuPath,this.dataForm.menuStatus=Number(this.checkedData.menuStatus),this.dataForm.sysId=this.checkedData.sysId,this.dataForm.menuPid=this.checkedData.menuPid,this.dataForm.menuIco=this.checkedData.menuIco):(this.dataForm.sysId=this.checkedData.sysId,this.dataForm.menuPid=this.checkedData.menuPid)},saveArea:function(){var t=this;console.log(this.dataForm),this.$refs.addForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl(t.API.savaOrUpdateMenu),method:"post",data:t.$http.adornData(t.dataForm)}).then(function(e){var a=e.data;0==a.code?(t.$message({message:"成功",type:"success"}),t.$emit("addback",!0)):t.$message.error(a.msg)})})},cancle:function(){this.$emit("addback",!1)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"addForm",attrs:{rules:t.rules,model:t.dataForm,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"菜单代码",prop:"menuCode"}},[a("el-input",{attrs:{type:"text",maxlength:"15",placeholder:"请输入菜单代码"},model:{value:t.dataForm.menuCode,callback:function(e){t.$set(t.dataForm,"menuCode",e)},expression:"dataForm.menuCode"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{attrs:{type:"text",maxlength:"10",placeholder:"请输入菜单名称"},model:{value:t.dataForm.menuName,callback:function(e){t.$set(t.dataForm,"menuName",e)},expression:"dataForm.menuName"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"菜单图标",prop:"menuIco"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入菜单图标"},model:{value:t.dataForm.menuIco,callback:function(e){t.$set(t.dataForm,"menuIco",e)},expression:"dataForm.menuIco"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"菜单路径",prop:"menuPath"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入菜单路径"},model:{value:t.dataForm.menuPath,callback:function(e){t.$set(t.dataForm,"menuPath",e)},expression:"dataForm.menuPath"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"区域状态",prop:"menuStatus"}},[a("el-radio-group",{model:{value:t.dataForm.menuStatus,callback:function(e){t.$set(t.dataForm,"menuStatus",e)},expression:"dataForm.menuStatus"}},[a("el-radio",{attrs:{label:0}},[t._v("停用")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("启用")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveArea()}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.cancle()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(n,i,!1,function(t){a("uVed")},null,null);e.default=s.exports},"3hZC":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),i=a.n(n),s=a("0xDb"),o=a("HMPb"),r=a("NxFF"),d=a("1Svv"),l={name:"menu-administrator-index",props:["siteContentViewHeight"],components:{orgTree:o.a,pagination:r.a,addmenudialog:d.default},data:function(){return{treeData:[],dataList:[],addMenuVisiable:!1,dataListLoading:!1,isEdit:"",checkedData:{},nodeId:"",sysId:"",tag:"",tableDataSelections:[],pageObj:{pageIndex:this.API.constObj.pageIndex,pageSize:this.API.constObj.pageSize,total:0}}},created:function(){this.getDataTree()},methods:{getDataTree:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getSysMenuTreeInfoMenu),method:"post",data:this.$http.adornData()}).then(function(e){var a=e.data;a&&0===a.code?(t.treeData=a.data,t.orgTreeClick(t.treeData[0])):(t.$message.error(a.msg),t.treeData=[])})},orgTreeClick:function(t){this.nodeId=t.id,this.sysId=t.sysId,this.tag=t.tag,"system"===this.tag?this.getDataList():this.getData()},getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl(this.API.getSysMenuInfoMenu),method:"post",data:this.$http.adornData({sysId:this.nodeId,menuPid:0,size:this.pageObj.pageSize,current:this.pageObj.pageIndex+1})}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.data.records,t.pageObj.total=a.data.total):t.$message.error(a.msg),t.dataListLoading=!1})},getData:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl(this.API.getSysMenuInfoMenu),method:"post",data:this.$http.adornData({menuPid:this.nodeId,size:this.pageObj.pageSize,current:this.pageObj.pageIndex+1})}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.data.records,t.pageObj.total=a.data.total):t.$message.error(a.msg),t.dataListLoading=!1})},addMenu:function(){"system"===this.tag?(this.checkedData.sysId=this.nodeId,this.checkedData.menuPid=""):(this.checkedData.menuPid=this.nodeId,this.checkedData.sysId=this.sysId),this.title="添加",this.isEdit=!0,this.addMenuVisiable=!0},editMenu:function(t,e){this.checkedData=e,this.title="编辑",this.isEdit=!1,this.addMenuVisiable=!0},deleMenu:function(t,e){var a=this;this.$confirm("确定删除选中记录?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl(a.API.deleteMenu),method:"post",data:a.$http.adornData({menuId:e.menuId})}).then(function(t){var e=t.data;0===e.code?(a.getDataList(),a.$message.success("删除成功")):a.$message.error(e.msg)})}).catch(function(){})},selectionChangeHandle:function(t){this.tableDataSelections=t},moveDirection:function(t){if(0!==this.tableDataSelections.length){var e,a=this;a.tableDataSelections.sort(function(t,e){return a.dataList.indexOf(t)-a.dataList.indexOf(e)}),"down"==t&&a.tableDataSelections.reverse(),a.tableDataSelections.forEach(function(n){e=a.dataList.indexOf(n),"up"==t?a.moveUp(e):"down"==t&&a.moveDown(e)})}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveUp:function(t){0!=t&&(this.dataList=Object(s.d)(this.dataList,t,t-1,"up"))},moveDown:function(t){t!=this.dataList.length-1&&(this.dataList=Object(s.d)(this.dataList,t,t+1,"down"))},sortMenu:function(){var t=this,e=[];this.dataList.length<0||(this.dataList.forEach(function(t,a){e.push({id:t.menuId,orderno:a+1})}),this.$http({url:this.$http.adornUrl(this.API.sysMenuSortMenu),method:"post",data:this.$http.adornData({data:i()(e)})}).then(function(e){var a=e.data;a&&0===a.code?(t.getDataList(),t.$message.success("操作成功")):t.$message.error(a.msg)}))},addback:function(t){this.addMenuVisiable=!1,t&&(this.getDataList(),this.getDataTree())},PageTurning:function(t){this.pageObj.pageIndex=t.page_index,this.pageObj.pageSize=t.page_size,this.getDataList()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"menu-administrator"},[a("el-aside",{attrs:{width:"274px"}},[a("div",{style:{height:t.siteContentViewHeight-10+"px"}},[a("org-tree",{ref:"tree",attrs:{treeData:t.treeData},on:{"node-click":t.orgTreeClick}})],1)]),t._v(" "),a("el-main",[a("div",{staticClass:"hed-btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addMenu()}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("up")}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.moveDirection("down")}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.sortMenu()}}},[t._v("保存排序")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:t.siteContentViewHeight-100+"px"},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageObj.pageIndex*t.pageObj.pageSize+e.$index+1)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"menuName",label:"菜单名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menuCode",label:"菜单代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menuPath",label:"菜单路径"}}),t._v(" "),a("el-table-column",{attrs:{label:"区域状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.menuStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("停用")]):a("el-tag",{attrs:{size:"small"}},[t._v("启用")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.editMenu(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(a){return t.deleMenu(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",[a("pagination",{attrs:{pageIndex:t.pageObj.pageIndex,total:t.pageObj.total,pageSizes:[5,10,20,30],pageSize:t.pageObj.pageSize},on:{PageTurning:t.PageTurning}})],1)],1),t._v(" "),t.addMenuVisiable?a("el-dialog",{attrs:{title:t.title,width:"50%",visible:t.addMenuVisiable,"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(e){t.addMenuVisiable=e}}},[a("addmenudialog",{attrs:{checkedData:t.checkedData,isEdit:t.isEdit},on:{addback:t.addback}})],1):t._e()],1)},staticRenderFns:[]};var c=a("C7Lr")(l,u,!1,function(t){a("0rIL")},"data-v-e25679b0",null);e.default=c.exports},uVed:function(t,e){}});
//# sourceMappingURL=17.150e4a13052ab559451b.js.map