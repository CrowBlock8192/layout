{"version":3,"sources":["webpack:///src/views/modules/module-customization/list-custom-dialog.vue","webpack:///./src/views/modules/module-customization/list-custom-dialog.vue?e806","webpack:///./src/views/modules/module-customization/list-custom-dialog.vue"],"names":["list_custom_dialog","props","data","optionalColumnList","tableColumnList","dataList","sort","value","label","align","vertical","checkArr","loading","created","this","getColumnList","getTableData","methods","_this","$http","url","adornUrl","API","getDataTableColumn","method","adornData","tabId","checkedData","then","_ref","code","$message","error","msg","_this2","getDataComponentsList","componentsId","listFlog","_ref2","forEach","item","index","push","colId","menuChange","console","log","flag","i","length","list","listTitle","colName","listAlign","listVertical","listIsorder","listWidth","colCode","itemIndex","item1","splice","saveClick","_this3","addDataComponentsList","stringify_default","id","_ref3","success","columnDrop","_this4","wrapperTr","document","querySelector","sortable","sortable_complete_esm","create","animation","delay","onEnd","evt","oldItem","oldIndex","newIndex","getTableColWidth","tableWidth","localStorage","getItem","width","JSON","parse","colChange","newWidth","oldWidth","column","event","setTimeout","applyTableColWidths","applyTableCol","getElementById","getElementsByTagName","setItem","module_customization_list_custom_dialog","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","_v","staticStyle","slot","padding","model","callback","$$v","expression","_l","key","on","change","$event","_s","click","directives","name","rawName","ref","margin-top","border","header-cell-style","tooltip-effect","header-dragend","prop","scopedSlots","_u","fn","scope","placeholder","row","$set","clearable","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/42.ce8a12098b41a0b8a095.js","sourcesContent":["<template>\r\n    <el-container class=\"box\">\r\n        <el-main>\r\n            <div class=\"hed-btn\">\r\n                <el-dropdown>\r\n                    <el-button type=\"primary\">\r\n                        添加列<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                    </el-button>\r\n                    <el-dropdown-menu slot=\"dropdown\" style=\"width:220px;\">\r\n                        <div class=\"dropdown-menu-box\">\r\n                          <el-checkbox-group v-model=\"checkArr\" style=\"padding:10px 0 0 20px;\">\r\n                            <el-col  v-for=\"item in optionalColumnList\" :key=\"item.colCode\">\r\n                              <el-checkbox :label=\"item.colId\" :key=\"item.colId\" @change=\"menuChange(item)\" >{{item.colName}}</el-checkbox>\r\n                            </el-col>\r\n                          </el-checkbox-group>\r\n                        </div>\r\n                    </el-dropdown-menu>\r\n                 </el-dropdown>\r\n                <el-button type=\"primary\" @click=\"saveClick()\">保存</el-button>\r\n            </div>\r\n\r\n            <el-table\r\n                id=\"applyTable\"\r\n                @header-dragend=\"colChange\"\r\n                border\r\n                class=\"fixedtableHeight\"\r\n                ref=\"dragTable\"\r\n                :data=\"dataList\"\r\n                :header-cell-style=\"{border:'1px solid #ccc'}\"\r\n                tooltip-effect=\"dark\"\r\n                v-loading=\"loading\"\r\n                style=\"width: 100%;margin-top:1%;\"\r\n            >\r\n                <el-table-column label=\"序号\" type=\"index\" width=\"50\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"listTitle\" label=\"列名\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-input v-model=\"scope.row.listTitle\" placeholder=\"请输入\"></el-input>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"listAlign\" label=\"对齐方式\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-select v-model=\"scope.row.listAlign\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                                <el-option\r\n                                    v-for=\"item in align\"\r\n                                    :key=\"item.value\"\r\n                                    :label=\"item.label\"\r\n                                    :value=\"item.value\"\r\n                                >\r\n                                </el-option>\r\n                            </el-select>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"listVertical\" label=\"对齐方式\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-select v-model=\"scope.row.listVertical\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                                <el-option\r\n                                    v-for=\"item in vertical\"\r\n                                    :key=\"item.value\"\r\n                                    :label=\"item.label\"\r\n                                    :value=\"item.value\"\r\n                                >\r\n                                </el-option>\r\n                            </el-select>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"listIsorder\" label=\"是否排序\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-select v-model=\"scope.row.listIsorder\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                                <el-option\r\n                                    v-for=\"item in sort\"\r\n                                    :key=\"item.value\"\r\n                                    :label=\"item.label\"\r\n                                    :value=\"item.value\"\r\n                                >\r\n                                </el-option>\r\n                            </el-select>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"listWidth\" label=\"列宽(px)\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-input v-model=\"scope.row.listWidth\" placeholder=\"请输入\"></el-input>\r\n                    </template>\r\n                </el-table-column>\r\n                <!-- <el-table-column\r\n                    v-for=\"(item,index) in tableColumnList\"\r\n                    :key=\"`tableColumnList_${index}`\"\r\n                    :prop=\"tableColumnList[index].colCode\"\r\n                    :label=\"item.colName\"\r\n                    :property=\"item.colCode\"\r\n                    align=\"center\"\r\n                    :width=\"item.width\"\r\n                >\r\n                    <template  slot-scope=\"scope\">\r\n                        <el-input v-if=\"scope.row.flog == 2\" v-model=\"scope.row[scope.column.property]\"></el-input>\r\n                        <el-select v-if=\"scope.row.flog == 3\" v-model=\"scope.row[scope.column.property]\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                            <el-option\r\n                                v-for=\"item in options1\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.label\"\r\n                                :value=\"item.label\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-select v-if=\"scope.row.flog == 4\" v-model=\"scope.row[scope.column.property]\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                            <el-option\r\n                                v-for=\"item in options2\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.label\"\r\n                                :value=\"item.label\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-select v-if=\"scope.row.flog == 5\" v-model=\"scope.row[scope.column.property]\" placeholder=\"请选择\" clearable style=\"width:100%\">\r\n                            <el-option\r\n                                v-for=\"item in options3\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.label\"\r\n                                :value=\"item.label\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-input v-if=\"scope.row.flog == 1\"  v-model=\"scope.row[scope.column.property]\"></el-input>\r\n                    </template>\r\n                </el-table-column> -->\r\n            </el-table>\r\n        </el-main>\r\n    </el-container>\r\n</template>\r\n<script>\r\n    import Sortable from 'sortablejs'\r\n    export default{\r\n        props:[\r\n            'checkedData'\r\n        ],\r\n        data() {\r\n            return {\r\n                optionalColumnList: [],\r\n                tableColumnList: [],\r\n                dataList: [],\r\n                sort:[\r\n                    {\r\n                        value: '0',\r\n                        label: '可排序'\r\n                    },\r\n                    {\r\n                        value: '1',\r\n                        label: '不可排序'\r\n                    },\r\n                ],\r\n                align:[\r\n                    {\r\n                        value: 'left',\r\n                        label: '居左'\r\n                    },\r\n                    {\r\n                        value: 'center',\r\n                        label: '居中'\r\n                    },\r\n                    {\r\n                        value: 'right',\r\n                        label: '居右'\r\n                    },\r\n                ],\r\n                vertical:[\r\n                    {\r\n                        value: 'top',\r\n                        label: '居上'\r\n                    },\r\n                    {\r\n                        value: 'center',\r\n                        label: '居中'\r\n                    },\r\n                    {\r\n                        value: 'bottom',\r\n                        label: '居下'\r\n                    },\r\n                ],\r\n                checkArr:[],//获取选中的\r\n                loading:true\r\n            }\r\n        },\r\n\r\n        created () {\r\n            this.getColumnList()\r\n            this.getTableData()\r\n            // this.getTableColWidth()\r\n            // this.columnDrop()\r\n        },\r\n        methods:{\r\n            getColumnList(){\r\n                this.$http({\r\n                    url: this.$http.adornUrl(this.API.getDataTableColumn),\r\n                    method: 'post',\r\n                    data: this.$http.adornData({\r\n                      tabId:this.checkedData.tabId\r\n                    })\r\n                }).then(({data}) =>{\r\n                    if(data.code === 0) {\r\n                        this.optionalColumnList = data.data;\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                })\r\n            },\r\n\r\n            getTableData(){\r\n                this.$http({\r\n                    url: this.$http.adornUrl(this.API.getDataComponentsList),\r\n                    method: 'post',\r\n                    data: this.$http.adornData({\r\n                      componentsId:this.checkedData.componentsId,\r\n                      listFlog:'0'\r\n                    })\r\n                }).then(({data}) =>{\r\n                    if(data.code === 0) {\r\n                        // this.tableColumnList = data.data.heads;\r\n                        this.dataList = data.data;\r\n                        this.loading = false\r\n                        this.checkArr=[];\r\n                        this.dataList.forEach((item,index) =>{\r\n                            this.checkArr.push(\r\n                                item.colId\r\n                            )\r\n                        });\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                })\r\n            },\r\n            menuChange(item){\r\n                console.log(item)\r\n                //每一次调用menuChange都要重新获取tableColumnList和dataList，保证属性和数据是对应的\r\n                let flag = true\r\n                for(var i=0;i<this.checkArr.length;i++){\r\n                    if(this.checkArr[i] === item.colId){\r\n                        flag = false\r\n                        break\r\n                    }\r\n                }\r\n                if(!flag){\r\n                    // this.tableColumnList.push(item)\r\n                    var list = {\r\n                        listTitle:item.colName,\r\n                        listAlign:'center',\r\n                        listVertical:'center',\r\n                        listIsorder:'1',\r\n                        listWidth:200,\r\n                        colName: item.colName,\r\n                        colCode:item.colCode,\r\n                        colId:item.colId\r\n                    };\r\n                    this.dataList.push(list);\r\n                }\r\n                if(flag){\r\n                    // Array.prototype.contains = function(obj) {\r\n                    //     var j = this.length;\r\n                    //     while (j--) {\r\n                    //         if (this[j] === obj) {\r\n                    //           console.log(j)\r\n                    //             return j; // 返回的这个就是元素的索引下标，\r\n                    //         }\r\n                    //     }\r\n                    //     return false\r\n                    // }\r\n                    // this.tableColumnList.splice(this.tableColumnList.contains(item),1)\r\n                    // var a = this.dataList.contains(item)\r\n                    //删除表格中未选中数据\r\n                    let itemIndex = 0\r\n                    this.dataList.forEach(function(item1,index){\r\n                      if(item1.colId == item.colId){\r\n                        itemIndex = index\r\n                      }\r\n                    })\r\n                    this.dataList.splice(itemIndex,1)\r\n                }\r\n            },\r\n\r\n\r\n            saveClick(){\r\n                // var sortArr=[];\r\n                // this.tableColumnList.forEach((item,index)=>{\r\n                //     sortArr.push({\r\n                //         colCode:item.colCode,\r\n                //         colName:item.colName,\r\n                //         colId:item.colId,\r\n                //     })\r\n                // });\r\n                this.$http({\r\n                    url: this.$http.adornUrl(this.API.addDataComponentsList),\r\n                    method: 'post',\r\n                    data: this.$http.adornData({\r\n                        data:JSON.stringify(this.dataList),\r\n                        // headData:JSON.stringify(sortArr),\r\n                        id:this.checkedData.componentsId,\r\n                        code:'0'\r\n                    })\r\n                }).then(({data}) =>{\r\n                    if(data.code === 0) {\r\n                        this.optionalColumnList = data.data;\r\n                        this.$message.success('保存成功');\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                })\r\n            },\r\n\r\n            //列拖拽\r\n            columnDrop() {\r\n                const wrapperTr = document.querySelector(' .el-table__header-wrapper tr')\r\n                this.sortable = Sortable.create(wrapperTr, {\r\n                    animation: 180,\r\n                    delay: 0,\r\n                    onEnd: evt => {\r\n                    const oldItem = this.tableColumnList[evt.oldIndex]\r\n                        this.tableColumnList.splice(evt.oldIndex, 1)\r\n                        this.tableColumnList.splice(evt.newIndex, 0, oldItem)\r\n                    }\r\n                })\r\n            },\r\n\r\n            /**\r\n             * 获取浏览器缓存的列宽\r\n             */\r\n            getTableColWidth () {\r\n                var self = this\r\n                var tableWidth = localStorage.getItem('applyTableColWidths')\r\n\r\n                if (tableWidth) {\r\n                    for (var item = 0; item < self.tableColumnList.length; item++) {\r\n                        self.tableColumnList[item].width = JSON.parse(tableWidth)[item]\r\n\r\n                    }\r\n                }\r\n                console.log(JSON.parse(tableWidth)[item])\r\n            },\r\n            /**\r\n             * 拖动表头改变列宽\r\n             */\r\n            colChange (newWidth, oldWidth, column, event) {\r\n                setTimeout(() => {\r\n                    console.log(newWidth, oldWidth, column, event)\r\n                    console.log('拖动表头改变列宽')\r\n                    var applyTableColWidths = []\r\n                    var applyTable = document.getElementById('applyTable')\r\n                    var applyTableColgroup = applyTable.getElementsByTagName('colgroup')[0]\r\n                    var applyTableCol = applyTableColgroup.getElementsByTagName('col')\r\n                    for (var i = 0; i < applyTableCol.length; i++) {\r\n                        applyTableColWidths.push(applyTableCol[i].width)\r\n                    }\r\n                    console.log(JSON.stringify(applyTableColWidths))\r\n                    localStorage.setItem('applyTableColWidths', JSON.stringify(applyTableColWidths))\r\n                }, 100)\r\n            } ,\r\n\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .box{\r\n        .el-main{padding: 0;}\r\n        .hed-btn{\r\n            float: right;\r\n            padding: 0 0 10px 0;\r\n            .el-dropdown{\r\n                padding:0 10px 0 0;\r\n\r\n            }\r\n        }\r\n        .el-main{padding-bottom: 0;}\r\n    }\r\n\r\n\r\n\r\n    .dropdown-menu-box{\r\n      //设置高度才能显示出滚动条 !important\r\n      height:500px;\r\n      overflow: auto;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/modules/module-customization/list-custom-dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"box\"},[_c('el-main',[_c('div',{staticClass:\"hed-btn\"},[_c('el-dropdown',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"\\n                    添加列\"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{staticStyle:{\"width\":\"220px\"},attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('div',{staticClass:\"dropdown-menu-box\"},[_c('el-checkbox-group',{staticStyle:{\"padding\":\"10px 0 0 20px\"},model:{value:(_vm.checkArr),callback:function ($$v) {_vm.checkArr=$$v},expression:\"checkArr\"}},_vm._l((_vm.optionalColumnList),function(item){return _c('el-col',{key:item.colCode},[_c('el-checkbox',{key:item.colId,attrs:{\"label\":item.colId},on:{\"change\":function($event){return _vm.menuChange(item)}}},[_vm._v(_vm._s(item.colName))])],1)}),1)],1)])],1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveClick()}}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dragTable\",staticClass:\"fixedtableHeight\",staticStyle:{\"width\":\"100%\",\"margin-top\":\"1%\"},attrs:{\"id\":\"applyTable\",\"border\":\"\",\"data\":_vm.dataList,\"header-cell-style\":{border:'1px solid #ccc'},\"tooltip-effect\":\"dark\"},on:{\"header-dragend\":_vm.colChange}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"type\":\"index\",\"width\":\"50\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listTitle\",\"label\":\"列名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(scope.row.listTitle),callback:function ($$v) {_vm.$set(scope.row, \"listTitle\", $$v)},expression:\"scope.row.listTitle\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listAlign\",\"label\":\"对齐方式\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\",\"clearable\":\"\"},model:{value:(scope.row.listAlign),callback:function ($$v) {_vm.$set(scope.row, \"listAlign\", $$v)},expression:\"scope.row.listAlign\"}},_vm._l((_vm.align),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listVertical\",\"label\":\"对齐方式\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\",\"clearable\":\"\"},model:{value:(scope.row.listVertical),callback:function ($$v) {_vm.$set(scope.row, \"listVertical\", $$v)},expression:\"scope.row.listVertical\"}},_vm._l((_vm.vertical),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listIsorder\",\"label\":\"是否排序\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\",\"clearable\":\"\"},model:{value:(scope.row.listIsorder),callback:function ($$v) {_vm.$set(scope.row, \"listIsorder\", $$v)},expression:\"scope.row.listIsorder\"}},_vm._l((_vm.sort),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listWidth\",\"label\":\"列宽(px)\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(scope.row.listWidth),callback:function ($$v) {_vm.$set(scope.row, \"listWidth\", $$v)},expression:\"scope.row.listWidth\"}})]}}])})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7b55da74\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/module-customization/list-custom-dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7b55da74\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list-custom-dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list-custom-dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list-custom-dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7b55da74\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list-custom-dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7b55da74\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/module-customization/list-custom-dialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}