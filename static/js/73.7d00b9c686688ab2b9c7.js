webpackJsonprmsh([73],{sSyK:function(t,e){},zS61:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),n=a.n(s),i={name:"SystemLogManagement",components:{pagination:a("NxFF").a},props:["siteContentViewHeight"],data:function(){return{pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},systemLogList:[],status:"",uCreator:"",ip:"",data:"",startDateStr:"",endDateStr:"",options:[{value:"0",label:"异常"},{value:"1",label:"成功"}],tableHeight:"400"}},created:function(){this.findSystemLogPage()},watch:{systemLogList:{handler:function(t){this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-28-165}}},methods:{handleCurrentChange:function(t){this.pageObj.pageIndex=t,this.findSystemLogPage()},PageTurning:function(t){console.log("分页组件传回的分页信息："+n()(t)),this.pageObj.pageIndex=t.page_index,this.pageObj.pageSize=t.page_size,this.findSystemLogPage()},findSystemLogPage:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.queryOperateLog),method:"post",data:this.$http.adornData({startDate:this.startDateStr,endDate:this.endDateStr,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize})}).then(function(e){var a=e.data;"0"==a.code?(t.systemLogList=a.data.records,t.pageObj.total=a.data.total):t.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(t){console.log("连接错误"+t)})},search:function(){if(null===this.data)this.startDateStr="",this.endDateStr="";else if((this.data||""!=this.data)&&this.data.length>0){var t=this.data;this.startDateStr=this.commonFun.dateFormat(t[0],"yyyyMMdd"),this.endDateStr=this.commonFun.dateFormat(t[1],"yyyyMMdd")}else this.startDateStr="",this.endDateStr="";this.pageObj.pageIndex=this.API.constObj.pageIndex,this.findSystemLogPage()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"systemLog-management-container"},[a("el-header",{staticClass:"my-header",staticStyle:{height:"45px"}},[t._v("系统日志管理")]),t._v(" "),a("el-main",[a("div",{staticClass:"systemLog-management-title"},[a("div",{staticClass:"systemLog-management-title-left"},[a("el-date-picker",{attrs:{type:"daterange",format:"yyyyMMdd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)]),t._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.systemLogList,height:t.siteContentViewHeight-155+"px"}},[a("el-table-column",{attrs:{label:"序号",align:"center","min-width":"6%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageObj.pageIndex*t.pageObj.pageSize+e.$index+1)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"userCode",label:"登录人账号","show-overflow-tooltip":"","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"登录人姓名","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logResult",label:"登录结果","show-overflow-tooltip":"","min-width":"5%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logMessage",label:"登录失败原因","show-overflow-tooltip":"","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logIp",label:"登录IP地址","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logTime",label:"时间","min-width":"15%"}})],1),t._v(" "),a("div",[a("pagination",{attrs:{pageIndex:t.pageObj.pageIndex,total:t.pageObj.total,pageSize:t.pageObj.pageSize},on:{PageTurning:t.PageTurning}})],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(i,o,!1,function(t){a("sSyK")},"data-v-2bf29806",null);e.default=l.exports}});
//# sourceMappingURL=73.7d00b9c686688ab2b9c7.js.map