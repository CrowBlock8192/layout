{"version":3,"sources":["webpack:///src/views/modules/area-administrator/allot-area-dialog.vue","webpack:///./src/views/modules/area-administrator/allot-area-dialog.vue?29dd","webpack:///./src/views/modules/area-administrator/allot-area-dialog.vue"],"names":["allot_area_dialog","name","props","components","orgTree","computed","filtersDataList","this","dataList","filter","item","sysStsatus","data","roleId","checked","treeData","treeCheckBox","defaultChecked","sysId","activeName","$store","state","common","areaSysId","treeIds","treeLoading","watch","created","sysDataList","id","getData","methods","handleCheck","bol","newArr","setAllIsCheck","getIsCheckCurrent","$refs","tree","clearCheckedKeys","check","len","length","_this","$http","url","adornUrl","API","getAllApplySystemInfoSystem","method","adornData","searchCount","then","res","resData","code","$message","error","msg","handleClick","tab","_this2","getMenuTreetBysIdMenu","areaId","checkedData","_ref","getCurrentKey","_this3","batchInsertSysAreaMenuArea","menuId","getCheckedKeys","join","_ref2","success","arr","_this4","setCheckedKeys","getChild","forEach","push","isCheck","children","area_administrator_allot_area_dialog","render","_vm","_h","$createElement","_c","_self","attrs","type","on","tab-click","model","value","callback","$$v","expression","_l","index","key","label","sysName","_v","staticClass","change","size","click","directives","rawName","staticStyle","height","ref","checkbox","checkStrictly","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/62.fb217a267d7b50f7a128.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-tabs v-model=\"activeName\" type=\"card\" @tab-click=\"handleClick\">\r\n      <el-tab-pane v-for=\"(item, index) in filtersDataList\" :key=\"index\" :label=\"item.sysName\" :name=\"item.sysId\"></el-tab-pane>\r\n    </el-tabs>\r\n    <div class=\"float-right\">\r\n      <el-checkbox v-model=\"checked\" @change=\"handleCheck\">关联子节点</el-checkbox>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"getCurrentKey\">保存</el-button>\r\n    </div>\r\n    <div class=\"clearfix\"></div>\r\n    <el-scrollbar style='height: 400px;' v-loading=\"treeLoading\">\r\n      <org-tree ref=\"tree\" :treeData=\"treeData\" :checkbox=\"treeCheckBox\" :checkStrictly=\"checked\" :defaultChecked=\"defaultChecked\" @check=\"check\"></org-tree>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport orgTree from \"@/components/baseComponents/orgTree.vue\";\r\nexport default {\r\n  name: 'allot-area-dialog',\r\n  props: [\r\n    'checkedData'\r\n  ],\r\n  components: {\r\n    orgTree\r\n  },\r\n  computed: {\r\n    filtersDataList () {\r\n      return this.dataList.filter(item => item.sysStsatus === '1')\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      roleId: '',\r\n      checked: false,\r\n      treeData: [],\r\n      treeCheckBox: true,//tree复选框是否有\r\n      defaultChecked: [],\r\n      dataList: [],//机构数据\r\n      sysId: '',//机构id\r\n      activeName: this.$store.state.common.areaSysId,\r\n      treeIds: [],\r\n      treeLoading: true\r\n    }\r\n  },\r\n  watch: {},\r\n  created () {\r\n    this.sysDataList();\r\n    var id = this.$store.state.common.areaSysId;\r\n    this.getData(id);\r\n  },\r\n  methods: {\r\n    // 当前点击的对象\r\n    handleCheck (bol) {\r\n      this.treeIds = [];\r\n      const newArr = this.setAllIsCheck(this.treeData, bol)\r\n      this.treeData = newArr;\r\n      if (bol) {\r\n        this.defaultChecked = this.getIsCheckCurrent(newArr);\r\n        return\r\n      }\r\n      this.$refs.tree.clearCheckedKeys();\r\n    },\r\n    // 获取当前点击的checkbox的对象\r\n    check (len) {\r\n      this.checked = (len === this.treeIds.length ? true : false)\r\n    },\r\n    sysDataList () {\r\n      this.$http({\r\n        url: this.$http.adornUrl(this.API.getAllApplySystemInfoSystem),\r\n        method: 'post',\r\n        data: this.$http.adornData({\r\n          searchCount: false, //分页默认true，不需要传false\r\n        })\r\n      }).then((res) => {\r\n        var resData = res.data;\r\n        if (resData.code === 0) {\r\n          this.dataList = resData.data;\r\n        } else {\r\n          this.$message.error(resData.msg);\r\n          this.dataList = [];\r\n        }\r\n      })\r\n    },\r\n    handleClick (tab) {\r\n      this.sysId = tab.name;\r\n      this.getData(this.sysId)\r\n    },\r\n    getData (id) {\r\n      this.treeIds = [];\r\n      this.$http({\r\n        url: this.$http.adornUrl(this.API.getMenuTreetBysIdMenu),\r\n        method: 'post',\r\n        data: this.$http.adornData({\r\n          sysId: id,\r\n          areaId: this.checkedData.areaId,\r\n        })\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.treeData = data.data;\r\n          this.defaultChecked = this.getIsCheckCurrent(data.data);\r\n          this.treeLoading = false;\r\n        } else {\r\n          this.$message.error(data.msg);\r\n          this.treeData = [];\r\n          this.defaultChecked = [];\r\n          this.treeLoading = false;\r\n        }\r\n      });\r\n    },\r\n    getCurrentKey () { //保存选中节点\r\n      // console.log(this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()).join(','))\r\n      this.$http({\r\n        url: this.$http.adornUrl(this.API.batchInsertSysAreaMenuArea),\r\n        method: 'post',\r\n        data: this.$http.adornData({\r\n          areaId: this.checkedData.areaId, //区域id\r\n          sysId: this.sysId || this.$store.state.common.areaSysId, //系统id\r\n          menuId: this.$refs.tree.getCheckedKeys().join(','),//菜单id\r\n        })\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.$message.success('操作成功');\r\n        } else {\r\n          this.$message.error(data.msg);\r\n        }\r\n      });\r\n    },\r\n    getIsCheckCurrent (arr) { //多层树结构中取出是否选中\r\n      const setCheckedKeys = [];\r\n      if (!arr) return;\r\n      const getChild = (arr) => {\r\n        arr.forEach(item => {\r\n          this.treeIds.push(item.id)\r\n          if (item.isCheck) setCheckedKeys.push(item.id);\r\n          if (item['children'] && item['children'].length > 0) {\r\n            getChild(item.children)\r\n          }\r\n        })\r\n        this.checked = (setCheckedKeys.length === this.treeIds.length ? true : false)\r\n        return setCheckedKeys;\r\n      }\r\n      return getChild(arr)\r\n    },\r\n    setAllIsCheck (arr, bol) {\r\n      const getChild = (arr) => {\r\n        arr.forEach(item => {\r\n          item.isCheck = bol\r\n          if (item['children'] && item['children'].length > 0) {\r\n            getChild(item.children)\r\n          }\r\n        })\r\n        return arr\r\n      }\r\n      return getChild(arr)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.float-right {\r\n  padding-bottom: 10px;\r\n  margin-top: 10px;\r\n  .el-checkbox {\r\n    padding-right: 20px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/modules/area-administrator/allot-area-dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.filtersDataList),function(item,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":item.sysName,\"name\":item.sysId}})}),1),_vm._v(\" \"),_c('div',{staticClass:\"float-right\"},[_c('el-checkbox',{on:{\"change\":_vm.handleCheck},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"关联子节点\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.getCurrentKey}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"}),_vm._v(\" \"),_c('el-scrollbar',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.treeLoading),expression:\"treeLoading\"}],staticStyle:{\"height\":\"400px\"}},[_c('org-tree',{ref:\"tree\",attrs:{\"treeData\":_vm.treeData,\"checkbox\":_vm.treeCheckBox,\"checkStrictly\":_vm.checked,\"defaultChecked\":_vm.defaultChecked},on:{\"check\":_vm.check}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3e7810e0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/area-administrator/allot-area-dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e7810e0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./allot-area-dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./allot-area-dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./allot-area-dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e7810e0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./allot-area-dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e7810e0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/area-administrator/allot-area-dialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}