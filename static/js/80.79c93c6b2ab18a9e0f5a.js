webpackJsonprmsh([80],{sbLL:function(t,a){},y8p2:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l,o=e("a3Yh"),s=e.n(o),c=e("hRKE"),r=e.n(c),i={props:["checkedData","isEdit","currentRow"],data:function(){return{rules:{colCode:[{required:!0,message:"请输入列名",trigger:"change"}],colName:[{required:!0,message:"请输入中文名",trigger:"change"}],colDatalength:[{required:!0,message:"请输入长度",trigger:"change"}],colDatatype:[{required:!0,message:"请输入数据类型",trigger:"change"}]},options:[],dateFormatList:"",dataDictList:"",calcuFunDictList:[],isShow1:!1,isShow2:!1,disabled:!1,dataForm:{colId:"",tabId:"",colCode:"",colName:"",colDatatype:"",colDatalength:"",colIspk:1,colIsnotnull:1,colDateformat:"",colDiccode:"",funId:"",colDefaultvalue:"",colIscalculate:0,colSpan:"",rowsNum:"",width:"",align:"",dicCode:"",controlType:"",isShowAtForm:"",isEdit:""},dicCodeOptions:[],controlTypeOptions:[{value:"3",label:"时间选择框"},{value:"4",label:"字典选择框"},{value:"13",label:"机构选择框"},{value:"2",label:"多行文本框"},{value:"1",label:"单行文本框"},{value:"15",label:"年度多选型"},{value:"8",label:"数字文本框"},{value:"5",label:"下拉框类型"},{value:"6",label:"单选框类型"},{value:"7",label:"复选框类型"}],yesnoOptions:[{value:"0",label:"是"},{value:"1",label:"否"}],tableAlignOptions:[{value:"0",label:"左对齐"},{value:"1",label:"居中"},{value:"2",label:"右对齐"}],showOptions:[{value:"0",label:"列表中显示"},{value:"1",label:"表单中显示"},{value:"3",label:"通用"},{value:"2",label:"隐藏"}]}},created:function(){console.log(this.checkedData),console.log(r()(this.checkedData.rowsNum)),this.setFormData(),this.getDictItem(),this.getDataDictList(),this.getDictionary()},methods:(l={getDictItem:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDictItemTable),method:"post",data:this.$http.adornData({dictCode:"DataType"})}).then(function(a){var e=a.data;if(0==e.code){var l=[];e.data.forEach(function(t,a){var e={value:t.itemCode,label:t.itemName};l.push(e)}),t.options=l}else t.$message.error(e.msg)})},setFormData:function(){console.log(this.checkedData),!1===this.isEdit?(this.dataForm.colId=this.checkedData.colId,this.dataForm.colCode=this.checkedData.colCode,this.dataForm.colName=this.checkedData.colName,this.dataForm.colDatatype=this.checkedData.colDatatype,this.dataForm.colDatalength=this.checkedData.colDatalength,this.dataForm.colIspk=Number(this.checkedData.colIspk),this.dataForm.colIsnotnull=Number(this.checkedData.colIsnotnull),this.dataForm.colDateformat=this.checkedData.colDateformat,this.dataForm.colDiccode=this.checkedData.colDiccode,this.dataForm.colDefaultvalue=this.checkedData.colDefaultvalue,this.dataForm.colIscalculate=Number(this.checkedData.colIscalculate),this.dataForm.funId=this.checkedData.funId,this.dataForm.colSpan=this.checkedData.colSpan,this.dataForm.rowsNum=this.checkedData.rowsNum,this.dataForm.width=this.checkedData.width,this.dataForm.align=this.checkedData.align,this.dataForm.dicCode=this.checkedData.dicCode,this.dataForm.controlType=this.checkedData.controlType,this.dataForm.isShowAtForm=this.checkedData.isShowAtForm,this.dataForm.isEdit=this.checkedData.isEdit,console.log(this.checkedData),"1"==this.checkedData.colIscalculate?this.disabled=!1:this.disabled=!0,null===this.checkedData.colDateformat||""===this.checkedData.colDateformat?this.isShow1=!1:(this.isShow1=!0,this.getDateFormat()),null===this.checkedData.colDiccode||""===this.checkedData.colDiccode?this.isShow2=!1:(this.isShow2=!0,this.getDataDictList())):("1"==this.checkedData.colIscalculate?this.disabled=!1:this.disabled=!0,this.dataForm.tabId=this.checkedData.id),console.log(this.dataForm)},selectChange:function(t){var a=this;this.options.find(function(e){e.value===t&&("日期型"==e.label?(a.isShow1=!0,a.getDateFormat()):a.isShow1=!1,"字典型"==e.label?(a.isShow2=!0,a.getDataDictList()):a.isShow2=!1)})},radioChange:function(t){this.disabled=0==t},getDateFormat:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDictItemTable),method:"post",data:this.$http.adornData({dictCode:"DateFormat"})}).then(function(a){var e=a.data;0==e.code?t.dateFormatList=e.data.data:t.$message.error(e.meg)})},getDataDictList:function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDataDictListDict),method:"post",data:this.$http.adornData({})}).then(function(a){var e=a.data;0==e.code?t.dataDictList=e.data.records:t.$message.error(e.meg)})}},s()(l,"getDataDictList",function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.queryDataFunction),method:"post",data:this.$http.adornData({})}).then(function(a){var e=a.data;console.log(e),0==e.code?t.calcuFunDictList=e.data:t.$message.error(e.meg)})}),s()(l,"getDictionary",function(){var t=this;this.$http({url:this.$http.adornUrl(this.API.getDictInformation),method:"post"}).then(function(a){var e=a.data;if(console.log(e),0==e.code){var l=[];e.data.forEach(function(t,a){var e={value:t.dictCode,label:t.dictName};l.push(e)}),t.dicCodeOptions=l}else t.$message.error(e.meg)})}),s()(l,"saveArea",function(){var t=this;this.$refs.addForm.validate(function(a){console.log(t.currentRow),console.log(t.checkedData),t.dataForm.tabId=t.checkedData.id,a&&(t.isEdit?t.$http({url:t.$http.adornUrl(t.API.savaDataTableColumn),method:"post",data:t.$http.adornData(t.dataForm)}).then(function(a){var e=a.data;0==e.code?(t.$message({message:"成功",type:"success"}),t.$emit("addback",!0)):t.$message.error(e.msg)}):(t.dataForm.tabId=t.currentRow.id,t.$http({url:t.$http.adornUrl(t.API.updateDataTableColumn),method:"post",data:t.$http.adornData(t.dataForm)}).then(function(a){var e=a.data;0==e.code?(t.$message({message:"成功",type:"success"}),t.$emit("addback",!0)):t.$message.error(e.msg)})))})}),s()(l,"cancle",function(){this.$emit("addback",!1)}),l)},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-form",{ref:"addForm",staticClass:"commonsty-form",attrs:{rules:t.rules,model:t.dataForm,"label-width":"120px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"列名",prop:"colCode"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15",placeholder:"请输入列名"},model:{value:t.dataForm.colCode,callback:function(a){t.$set(t.dataForm,"colCode",a)},expression:"dataForm.colCode"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"长度",prop:"colDatalength"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"15",placeholder:"请输入长度"},model:{value:t.dataForm.colDatalength,callback:function(a){t.$set(t.dataForm,"colDatalength",a)},expression:"dataForm.colDatalength"}})],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"中文名",prop:"colName"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"10",placeholder:"请输入中文名"},model:{value:t.dataForm.colName,callback:function(a){t.$set(t.dataForm,"colName",a)},expression:"dataForm.colName"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"数据类型",prop:"colDatatype"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据类型"},on:{change:t.selectChange},model:{value:t.dataForm.colDatatype,callback:function(a){t.$set(t.dataForm,"colDatatype",a)},expression:"dataForm.colDatatype"}},t._l(t.options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"默认值",prop:"colDefaultvalue"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"10",placeholder:"请输入默认值"},model:{value:t.dataForm.colDefaultvalue,callback:function(a){t.$set(t.dataForm,"colDefaultvalue",a)},expression:"dataForm.colDefaultvalue"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[t.isShow1?e("el-form-item",{attrs:{label:"显示格式",prop:"colDateformat"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dataForm.colDateformat,callback:function(a){t.$set(t.dataForm,"colDateformat",a)},expression:"dataForm.colDateformat"}},t._l(t.dateFormatList,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1):t._e()],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isShow2,expression:"isShow2"}],attrs:{label:"关联字典",prop:"colDiccode"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dataForm.colDiccode,callback:function(a){t.$set(t.dataForm,"colDiccode",a)},expression:"dataForm.colDiccode"}},t._l(t.dataDictList,function(t){return e("el-option",{key:t.dictName,attrs:{label:t.dictName,value:t.dictName}})}),1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否主键",prop:"colIspk"}},[e("el-radio-group",{model:{value:t.dataForm.colIspk,callback:function(a){t.$set(t.dataForm,"colIspk",a)},expression:"dataForm.colIspk"}},[e("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否必填",prop:"colIspk"}},[e("el-radio-group",{model:{value:t.dataForm.colIsnotnull,callback:function(a){t.$set(t.dataForm,"colIsnotnull",a)},expression:"dataForm.colIsnotnull"}},[e("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否计算列",prop:"colIscalculate"}},[e("el-radio-group",{on:{change:t.radioChange},model:{value:t.dataForm.colIscalculate,callback:function(a){t.$set(t.dataForm,"colIscalculate",a)},expression:"dataForm.colIscalculate"}},[e("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"计算函数",prop:"funId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:t.disabled},model:{value:t.dataForm.funId,callback:function(a){t.$set(t.dataForm,"funId",a)},expression:"dataForm.funId"}},t._l(t.calcuFunDictList,function(t){return e("el-option",{key:t.dictName,attrs:{label:t.funName,value:t.funId}})}),1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"表单跨列",prop:"colSpan"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:8,max:24,label:"描述文字"},model:{value:t.dataForm.colSpan,callback:function(a){t.$set(t.dataForm,"colSpan",a)},expression:"dataForm.colSpan"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"表单文本域高度",prop:"rowsNum"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:500,label:"描述文字"},model:{value:t.dataForm.rowsNum,callback:function(a){t.$set(t.dataForm,"rowsNum",a)},expression:"dataForm.rowsNum"}})],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"列表宽度",prop:"width"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:500,label:"描述文字"},model:{value:t.dataForm.width,callback:function(a){t.$set(t.dataForm,"width",a)},expression:"dataForm.width"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"列表对齐方式",prop:"align"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.dataForm.align,callback:function(a){t.$set(t.dataForm,"align",a)},expression:"dataForm.align"}},t._l(t.tableAlignOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"关联字典",prop:"dicCode"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.dataForm.dicCode,callback:function(a){t.$set(t.dataForm,"dicCode",a)},expression:"dataForm.dicCode"}},t._l(t.dicCodeOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"控件类型",prop:"controlType"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.dataForm.controlType,callback:function(a){t.$set(t.dataForm,"controlType",a)},expression:"dataForm.controlType"}},t._l(t.controlTypeOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"显示方式",prop:"isShowAtForm"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.dataForm.isShowAtForm,callback:function(a){t.$set(t.dataForm,"isShowAtForm",a)},expression:"dataForm.isShowAtForm"}},t._l(t.showOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"可否编辑",prop:"isEdit"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.dataForm.isEdit,callback:function(a){t.$set(t.dataForm,"isEdit",a)},expression:"dataForm.isEdit"}},t._l(t.yesnoOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saveArea()}}},[t._v("保存")]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.cancle()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var d=e("C7Lr")(i,n,!1,function(t){e("sbLL")},null,null);a.default=d.exports}});
//# sourceMappingURL=80.79c93c6b2ab18a9e0f5a.js.map